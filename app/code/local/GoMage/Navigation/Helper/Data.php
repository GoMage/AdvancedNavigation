<?php eval(base64_decode("LyoqICogR29NYWdlIEFkdmFuY2VkIE5hdmlnYXRpb24gRXh0ZW5zaW9uICogKiBAY2F0ZWdvcnkgRXh0ZW5zaW9uICogQGNvcHlyaWdodCBDb3B5cmlnaHQgKGMpIDIwMTAtMjAxNCBHb01hZ2UgKGh0dHA6Ly93d3cuZ29tYWdlLmNvbSkgKiBAYXV0aG9yIEdvTWFnZSAqIEBsaWNlbnNlIGh0dHA6Ly93d3cuZ29tYWdlLmNvbS9saWNlbnNlLWFncmVlbWVudC8gU2luZ2xlIGRvbWFpbiBsaWNlbnNlICogQHRlcm1zIG9mIHVzZSBodHRwOi8vd3d3LmdvbWFnZS5jb20vdGVybXMtb2YtdXNlICogQHZlcnNpb24gUmVsZWFzZTogNC42ICogQHNpbmNlIENsYXNzIGF2YWlsYWJsZSBzaW5jZSBSZWxlYXNlIDEuMCAqLyByZXF1aXJlX29uY2UoTWFnZTo6Z2V0QmFzZURpcignbGliJykgLiBEUyAuICdHb01hZ2UnIC4gRFMgLiAnTW9iaWxlRGV0ZWN0JyAuIERTIC4gJ05hdmlnYXRpb25fTW9iaWxlX0RldGVjdC5waHAnKTsgY2xhc3MgR29NYWdlX05hdmlnYXRpb25fSGVscGVyX0RhdGEgZXh0ZW5kcyBNYWdlX0NvcmVfSGVscGVyX0Fic3RyYWN0IHsgcHJvdGVjdGVkICRwcm9kdWN0X2F0dHJpYnV0ZXMgPSBhcnJheSgpOyBwdWJsaWMgZnVuY3Rpb24gZ2V0Q29uZmlnRGF0YSgkbm9kZSkgeyByZXR1cm4gTWFnZTo6Z2V0U3RvcmVDb25maWcoJ2dvbWFnZV9uYXZpZ2F0aW9uLycgLiAkbm9kZSk7IH0gcHVibGljIGZ1bmN0aW9uIGdldEFsbFN0b3JlRG9tYWlucygpIHsgJGRvbWFpbnMgPSBhcnJheSgpOyBmb3JlYWNoIChNYWdlOjphcHAoKS0+Z2V0V2Vic2l0ZXMoKSBhcyAkd2Vic2l0ZSkgeyAkdXJsID0gJHdlYnNpdGUtPmdldENvbmZpZygnd2ViL3Vuc2VjdXJlL2Jhc2VfdXJsJyk7IGlmICgkZG9tYWluID0gdHJpbShwcmVnX3JlcGxhY2UoJy9eLio/XFwvXFwvKC4qKT9cXC8vJywgJyQxJywgJHVybCkpKSB7ICRkb21haW5zW10gPSAkZG9tYWluOyB9ICR1cmwgPSAkd2Vic2l0ZS0+Z2V0Q29uZmlnKCd3ZWIvc2VjdXJlL2Jhc2VfdXJsJyk7IGlmICgkZG9tYWluID0gdHJpbShwcmVnX3JlcGxhY2UoJy9eLio/XFwvXFwvKC4qKT9cXC8vJywgJyQxJywgJHVybCkpKSB7ICRkb21haW5zW10gPSAkZG9tYWluOyB9IH0gcmV0dXJuIGFycmF5X3VuaXF1ZSgkZG9tYWlucyk7IH0gcHVibGljIGZ1bmN0aW9uIGdldEF2YWlsYWJlbFdlYnNpdGVzKCkgeyByZXR1cm4gJHRoaXMtPl93KCk7IH0gcHVibGljIGZ1bmN0aW9uIGdldEF2YWlsYXZlbFdlYnNpdGVzKCkgeyByZXR1cm4gJHRoaXMtPl93KCk7IH0gcHJvdGVjdGVkIGZ1bmN0aW9uIF93KCkgeyBpZiAoIU1hZ2U6OmdldFN0b3JlQ29uZmlnKCdnb21hZ2VfYWN0aXZhdGlvbi9hZHZhbmNlZG5hdmlnYXRpb24vaW5zdGFsbGVkJykgfHwgKGludHZhbChNYWdlOjpnZXRTdG9yZUNvbmZpZygnZ29tYWdlX2FjdGl2YXRpb24vYWR2YW5jZWRuYXZpZ2F0aW9uL2NvdW50JykpID4gMTApICkgeyByZXR1cm4gYXJyYXkoKTsgfSAkdGltZV90b191cGRhdGUgPSA2MCAqIDYwICogMjQgKiAxNTsgJHIgPSBNYWdlOjpnZXRTdG9yZUNvbmZpZygnZ29tYWdlX2FjdGl2YXRpb24vYWR2YW5jZWRuYXZpZ2F0aW9uL2FyJyk7ICR0ID0gTWFnZTo6Z2V0U3RvcmVDb25maWcoJ2dvbWFnZV9hY3RpdmF0aW9uL2FkdmFuY2VkbmF2aWdhdGlvbi90aW1lJyk7ICRzID0gTWFnZTo6Z2V0U3RvcmVDb25maWcoJ2dvbWFnZV9hY3RpdmF0aW9uL2FkdmFuY2VkbmF2aWdhdGlvbi93ZWJzaXRlcycpOyAkbGFzdF9jaGVjayA9IHN0cl9yZXBsYWNlKCRyLCAnJywgTWFnZTo6aGVscGVyKCdjb3JlJyktPmRlY3J5cHQoJHQpKTsgJGFsbHNpdGVzID0gZXhwbG9kZSgnLCcsIHN0cl9yZXBsYWNlKCRyLCAnJywgTWFnZTo6aGVscGVyKCdjb3JlJyktPmRlY3J5cHQoJHMpKSk7ICRhbGxzaXRlcyA9IGFycmF5X2RpZmYoJGFsbHNpdGVzLCBhcnJheSgiIikpOyBpZiAoKCRsYXN0X2NoZWNrICsgJHRpbWVfdG9fdXBkYXRlKSA8IHRpbWUoKSkgeyAkdGhpcy0+YShNYWdlOjpnZXRTdG9yZUNvbmZpZygnZ29tYWdlX2FjdGl2YXRpb24vYWR2YW5jZWRuYXZpZ2F0aW9uL2tleScpLCBpbnR2YWwoTWFnZTo6Z2V0U3RvcmVDb25maWcoJ2dvbWFnZV9hY3RpdmF0aW9uL2FkdmFuY2VkbmF2aWdhdGlvbi9jb3VudCcpKSwgaW1wbG9kZSgnLCcsICRhbGxzaXRlcykgKTsgfSByZXR1cm4gJGFsbHNpdGVzOyB9IHB1YmxpYyBmdW5jdGlvbiBhKCRrLCAkYyA9IDAsICRzID0gJycpIHsgJGNoID0gY3VybF9pbml0KCk7IGN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9VUkwsIHNwcmludGYoJ2h0dHBzOi8vd3d3LmdvbWFnZS5jb20vaW5kZXgucGhwL2dvbWFnZV9kb3dubG9hZGFibGUva2V5L2NoZWNrJykpOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfUE9TVCwgdHJ1ZSk7IGN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9QT1NURklFTERTLCAna2V5PScgLiB1cmxlbmNvZGUoJGspIC4gJyZza3U9YWR2YW5jZWQtbmF2aWdhdGlvbiZkb21haW5zPScgLiB1cmxlbmNvZGUoaW1wbG9kZSgnLCcsICR0aGlzLT5nZXRBbGxTdG9yZURvbWFpbnMoKSkpIC4gJyZ2ZXI9JyAuIHVybGVuY29kZSgnNC42JykpOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfVElNRU9VVCwgMzApOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfUkVUVVJOVFJBTlNGRVIsIHRydWUpOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfU1NMX1ZFUklGWVBFRVIsIDApOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfU1NMX1ZFUklGWUhPU1QsIDApOyAkY29udGVudCA9IGN1cmxfZXhlYygkY2gpOyAkciA9IFplbmRfSnNvbjo6ZGVjb2RlKCRjb250ZW50KTsgJGUgPSBNYWdlOjpoZWxwZXIoJ2NvcmUnKTsgaWYgKGVtcHR5KCRyKSkgeyAkdmFsdWUxID0gTWFnZTo6Z2V0U3RvcmVDb25maWcoJ2dvbWFnZV9hY3RpdmF0aW9uL2FkdmFuY2VkbmF2aWdhdGlvbi9hcicpOyAkZ3JvdXBzID0gYXJyYXkoICdhZHZhbmNlZG5hdmlnYXRpb24nID0+IGFycmF5KCAnZmllbGRzJyA9PiBhcnJheSggJ2FyJyA9PiBhcnJheSggJ3ZhbHVlJyA9PiAkdmFsdWUxICksICd3ZWJzaXRlcycgPT4gYXJyYXkoICd2YWx1ZScgPT4gKHN0cmluZylNYWdlOjpnZXRTdG9yZUNvbmZpZygnZ29tYWdlX2FjdGl2YXRpb24vYWR2YW5jZWRuYXZpZ2F0aW9uL3dlYnNpdGVzJykgKSwgJ3RpbWUnID0+IGFycmF5KCAndmFsdWUnID0+IChzdHJpbmcpJGUtPmVuY3J5cHQoJHZhbHVlMSAuICh0aW1lKCkgLSAoNjAgKiA2MCAqIDI0ICogMTUgLSAxODAwKSkgLiAkdmFsdWUxKSApLCAnY291bnQnID0+IGFycmF5KCAndmFsdWUnID0+ICRjICsgMSkgKSApICk7IE1hZ2U6OmdldE1vZGVsKCdhZG1pbmh0bWwvY29uZmlnX2RhdGEnKSAtPnNldFNlY3Rpb24oJ2dvbWFnZV9hY3RpdmF0aW9uJykgLT5zZXRHcm91cHMoJGdyb3VwcykgLT5zYXZlKCk7IE1hZ2U6OmdldENvbmZpZygpLT5yZWluaXQoKTsgTWFnZTo6YXBwKCktPnJlaW5pdFN0b3JlcygpOyByZXR1cm47IH0gJHZhbHVlMSA9ICcnOyAkdmFsdWUyID0gJyc7IGlmIChpc3NldCgkclsnZCddKSAmJiBpc3NldCgkclsnYyddKSkgeyAkdmFsdWUxID0gJGUtPmVuY3J5cHQoYmFzZTY0X2VuY29kZShaZW5kX0pzb246OmVuY29kZSgkcikpKTsgaWYgKCEkcykgeyAkcyA9IE1hZ2U6OmdldFN0b3JlQ29uZmlnKCdnb21hZ2VfYWN0aXZhdGlvbi9hZHZhbmNlZG5hdmlnYXRpb24vd2Vic2l0ZXMnKTsgfSAkcyA9IGFycmF5X3NsaWNlKGV4cGxvZGUoJywnLCAkcyksIDAsICRyWydjJ10pOyAkdmFsdWUyID0gJGUtPmVuY3J5cHQoJHZhbHVlMSAuIGltcGxvZGUoJywnLCAkcykgLiAkdmFsdWUxKTsgfSAkZ3JvdXBzID0gYXJyYXkoICdhZHZhbmNlZG5hdmlnYXRpb24nID0+IGFycmF5KCAnZmllbGRzJyA9PiBhcnJheSggJ2FyJyA9PiBhcnJheSggJ3ZhbHVlJyA9PiAkdmFsdWUxICksICd3ZWJzaXRlcycgPT4gYXJyYXkoICd2YWx1ZScgPT4gKHN0cmluZykkdmFsdWUyICksICd0aW1lJyA9PiBhcnJheSggJ3ZhbHVlJyA9PiAoc3RyaW5nKSRlLT5lbmNyeXB0KCR2YWx1ZTEgLiB0aW1lKCkgLiAkdmFsdWUxKSApLCAnaW5zdGFsbGVkJyA9PiBhcnJheSggJ3ZhbHVlJyA9PiAxICksICdjb3VudCcgPT4gYXJyYXkoICd2YWx1ZScgPT4gMCkgKSApICk7IE1hZ2U6OmdldE1vZGVsKCdhZG1pbmh0bWwvY29uZmlnX2RhdGEnKSAtPnNldFNlY3Rpb24oJ2dvbWFnZV9hY3RpdmF0aW9uJykgLT5zZXRHcm91cHMoJGdyb3VwcykgLT5zYXZlKCk7IE1hZ2U6OmdldENvbmZpZygpLT5yZWluaXQoKTsgTWFnZTo6YXBwKCktPnJlaW5pdFN0b3JlcygpOyB9IHB1YmxpYyBmdW5jdGlvbiBnYSgpIHsgcmV0dXJuIFplbmRfSnNvbjo6ZGVjb2RlKGJhc2U2NF9kZWNvZGUoTWFnZTo6aGVscGVyKCdjb3JlJyktPmRlY3J5cHQoTWFnZTo6Z2V0U3RvcmVDb25maWcoJ2dvbWFnZV9hY3RpdmF0aW9uL2FkdmFuY2VkbmF2aWdhdGlvbi9hcicpKSkpOyB9IHB1YmxpYyBmdW5jdGlvbiBpc0dvbWFnZU5hdmlnYXRpb24oKSB7IGlmICgkdGhpcy0+aXNNb2JpbGVEZXZpY2UoKSAmJiBNYWdlOjpnZXRTdG9yZUNvbmZpZ0ZsYWcoJ2dvbWFnZV9uYXZpZ2F0aW9uL2dlbmVyYWwvZGlzYWJsZV9tb2JpbGUnKSkgeyByZXR1cm4gZmFsc2U7IH0gcmV0dXJuIGluX2FycmF5KE1hZ2U6OmFwcCgpLT5nZXRTdG9yZSgpLT5nZXRXZWJzaXRlSWQoKSwgJHRoaXMtPmdldEF2YWlsYXZlbFdlYnNpdGVzKCkpICYmIE1hZ2U6OmdldFN0b3JlQ29uZmlnRmxhZygnZ29tYWdlX25hdmlnYXRpb24vZ2VuZXJhbC9tb2RlJyk7IH0gcHVibGljIGZ1bmN0aW9uIGlzR29tYWdlTmF2aWdhdGlvbk1lbnUoKSB7IHJldHVybiBpbl9hcnJheShNYWdlOjphcHAoKS0+Z2V0U3RvcmUoKS0+Z2V0V2Vic2l0ZUlkKCksICR0aGlzLT5nZXRBdmFpbGF2ZWxXZWJzaXRlcygpKSAmJiBNYWdlOjpnZXRTdG9yZUNvbmZpZ0ZsYWcoJ2dvbWFnZV9uYXZpZ2F0aW9uL21lbnViYXJzZXR0aW5ncy9uYXZpZ2F0aW9uJyk7IH0gcHVibGljIGZ1bmN0aW9uIGlzR29tYWdlTmF2aWdhdGlvbkFqYXgoKSB7IHJldHVybiAkdGhpcy0+aXNHb21hZ2VOYXZpZ2F0aW9uKCkgJiYgTWFnZTo6Z2V0U3RvcmVDb25maWdGbGFnKCdnb21hZ2VfbmF2aWdhdGlvbi9nZW5lcmFsL3BhZ2VyJykgJiYgKE1hZ2U6OnJlZ2lzdHJ5KCdjdXJyZW50X2NhdGVnb3J5JykgfHwgKE1hZ2U6OmFwcCgpLT5nZXRGcm9udENvbnRyb2xsZXIoKS0+Z2V0UmVxdWVzdCgpLT5nZXRSb3V0ZU5hbWUoKSA9PSAnY2F0YWxvZ3NlYXJjaCcgJiYgTWFnZTo6YXBwKCktPmdldEZyb250Q29udHJvbGxlcigpLT5nZXRSZXF1ZXN0KCktPmdldENvbnRyb2xsZXJOYW1lKCkgIT0gJ2FkdmFuY2VkJykpOyB9IHB1YmxpYyBmdW5jdGlvbiBpc0dvbWFnZU5hdmlnYXRpb25DbGVhckFqYXgoKSB7IHJldHVybiAkdGhpcy0+aXNHb21hZ2VOYXZpZ2F0aW9uKCkgJiYgKE1hZ2U6OnJlZ2lzdHJ5KCdjdXJyZW50X2NhdGVnb3J5JykgfHwgKE1hZ2U6OmFwcCgpLT5nZXRGcm9udENvbnRyb2xsZXIoKS0+Z2V0UmVxdWVzdCgpLT5nZXRSb3V0ZU5hbWUoKSA9PSAnY2F0YWxvZ3NlYXJjaCcgJiYgTWFnZTo6YXBwKCktPmdldEZyb250Q29udHJvbGxlcigpLT5nZXRSZXF1ZXN0KCktPmdldENvbnRyb2xsZXJOYW1lKCkgIT0gJ2FkdmFuY2VkJykpOyB9IHB1YmxpYyBmdW5jdGlvbiBmb3JtYXRDb2xvcigkdmFsdWUpIHsgaWYgKCR2YWx1ZSA9IHByZWdfcmVwbGFjZSgnL1teYS16QS1aMC05XHNdLycsICcnLCAkdmFsdWUpKSB7ICR2YWx1ZSA9ICcjJyAuICR2YWx1ZTsgfSByZXR1cm4gJHZhbHVlOyB9IHB1YmxpYyBmdW5jdGlvbiBpc0ZyZW5kbHlVcmwoKSB7IHJldHVybiAkdGhpcy0+aXNHb21hZ2VOYXZpZ2F0aW9uKCkgJiYgTWFnZTo6Z2V0U3RvcmVDb25maWdGbGFnKCdnb21hZ2VfbmF2aWdhdGlvbi9maWx0ZXJfc2V0dGluZ3MvZnJlbmRseXVybCcpICYmICEkdGhpcy0+aXNHb01hZ2VTZW9Cb29zdGVyRW5hYmxlZCgpOyB9IHB1YmxpYyBmdW5jdGlvbiBpc0dvTWFnZVNlb0Jvb3N0ZXJFbmFibGVkKCkgeyAkX21vZHVsZXMgPSBNYWdlOjpnZXRDb25maWcoKS0+Z2V0Tm9kZSgnbW9kdWxlcycpLT5jaGlsZHJlbigpOyAkX21vZHVsZXNBcnJheSA9IChhcnJheSkkX21vZHVsZXM7IGlmICghaXNzZXQoJF9tb2R1bGVzQXJyYXlbJ0dvTWFnZV9TZW9Cb29zdGVyJ10pKSB7IHJldHVybiBmYWxzZTsgfSByZXR1cm4gJF9tb2R1bGVzQXJyYXlbJ0dvTWFnZV9TZW9Cb29zdGVyJ10tPmlzKCdhY3RpdmUnKTsgfSBwdWJsaWMgZnVuY3Rpb24gZ2V0UmVxdWVzdCgpIHsgJHJlcXVlc3QgPSBNYWdlOjphcHAoKS0+Z2V0RnJvbnRDb250cm9sbGVyKCktPmdldFJlcXVlc3QoKTsgaWYgKCR0aGlzLT5pc0dvTWFnZVNlb0Jvb3N0ZXJFbmFibGVkKCkpIHsgJGhlbHBlciA9IE1hZ2U6OmhlbHBlcignZ29tYWdlX3Nlb2Jvb3N0ZXIvbGF5ZXJlZCcpOyAkcmVxdWVzdCA9ICRoZWxwZXItPmdldFNlcGFyYXRvcigpIHx8ICRoZWxwZXItPmNhbkFkZFJld3JpdGVQYXRoKCkgPyAkaGVscGVyLT5nZXRSZXF1ZXN0KCkgOiAkcmVxdWVzdDsgfSByZXR1cm4gJHJlcXVlc3Q7IH0gcHVibGljIGZ1bmN0aW9uIGdldEZpbHRlclVybCgkcm91dGUgPSAnKi8qLyonLCAkcGFyYW1zID0gYXJyYXkoKSkgeyBpZiAoISR0aGlzLT5pc0ZyZW5kbHlVcmwoKSkgeyAkcGFyYW1zWydfcXVlcnknXVsnYWpheCddID0gbnVsbDsgcmV0dXJuIE1hZ2U6OmhlbHBlcignZ29tYWdlX25hdmlnYXRpb24vdXJsJyktPndyYXBwKE1hZ2U6OmdldFVybCgkcm91dGUsICRwYXJhbXMpKTsgfSAkbW9kZWwgPSBNYWdlOjpnZXRNb2RlbCgnY29yZS91cmwnKTsgJGF0dHIgPSBNYWdlOjpyZWdpc3RyeSgnZ2FuX2ZpbHRlcl9hdHRyaWJ1dGVzJyk7ICRxdWVyeV9wYXJhbXMgPSBpc19hcnJheSgkbW9kZWwtPmdldFJlcXVlc3QoKS0+Z2V0UXVlcnkoKSkgPyAkbW9kZWwtPmdldFJlcXVlc3QoKS0+Z2V0UXVlcnkoKSA6IGFycmF5KCk7ICRxdWVyeSA9IGFycmF5KCk7IGlmIChpc3NldCgkcGFyYW1zWydfcXVlcnknXSkgJiYgaXNfYXJyYXkoJHBhcmFtc1snX3F1ZXJ5J10pKSB7ICRxdWVyeV9wYXJhbXMgPSBhcnJheV9tZXJnZSgkcXVlcnlfcGFyYW1zLCAkcGFyYW1zWydfcXVlcnknXSk7IH0gZm9yZWFjaCAoJHF1ZXJ5X3BhcmFtcyBhcyAkcGFyYW0gPT4gJHZhbHVlKSB7IGlmIChpc19udWxsKCR2YWx1ZSkpIHsgJHF1ZXJ5WyRwYXJhbV0gPSBudWxsOyBjb250aW51ZTsgfSBpZiAoJHBhcmFtID09ICdjYXQnKSB7ICR2YWx1ZXMgPSBleHBsb2RlKCcsJywgJHZhbHVlKTsgJHByZXBhcmVfdmFsdWVzID0gYXJyYXkoKTsgZm9yZWFjaCAoJHZhbHVlcyBhcyAkX3ZhbHVlKSB7ICRjYXRlZ29yeSA9IE1hZ2U6OmdldE1vZGVsKCdjYXRhbG9nL2NhdGVnb3J5JyktPmxvYWQoJF92YWx1ZSk7IGlmICgkY2F0ZWdvcnkgJiYgJGNhdGVnb3J5LT5nZXRJZCgpKSB7IGlmIChNYWdlOjpnZXRTdG9yZUNvbmZpZ0ZsYWcoJ2dvbWFnZV9uYXZpZ2F0aW9uL2ZpbHRlcl9zZXR0aW5ncy9leHBlbmRfZnJlbmRseXVybCcpKSB7ICRwYXJlbnRfaWRzID0gJGNhdGVnb3J5LT5nZXRQYXJlbnRJZHMoKTsgJHBhcmVudF9jYXRlZ29yeSA9IE1hZ2U6OmdldE1vZGVsKCdjYXRhbG9nL2NhdGVnb3J5JyktPmxvYWQoZW5kKCRwYXJlbnRfaWRzKSk7ICRwcmVwYXJlX3ZhbHVlc1tdID0gJHBhcmVudF9jYXRlZ29yeS0+Z2V0RGF0YSgndXJsX2tleScpIC4gJ3wnIC4gJGNhdGVnb3J5LT5nZXREYXRhKCd1cmxfa2V5Jyk7IH0gZWxzZSB7ICRwcmVwYXJlX3ZhbHVlc1tdID0gJGNhdGVnb3J5LT5nZXREYXRhKCd1cmxfa2V5Jyk7IH0gfSB9IGlmICghZW1wdHkoJHByZXBhcmVfdmFsdWVzKSkgeyAkcXVlcnlbJHBhcmFtXSA9IGltcGxvZGUoJywnLCAkcHJlcGFyZV92YWx1ZXMpOyB9IGVsc2UgeyAkcXVlcnlbJHBhcmFtXSA9IG51bGw7IH0gfSBlbHNlaWYgKGlzc2V0KCRhdHRyWyRwYXJhbV0pICYmICFpbl9hcnJheSgkYXR0clskcGFyYW1dWyd0eXBlJ10sIGFycmF5KCdwcmljZScsICdkZWNpbWFsJykpKSB7ICR2YWx1ZXMgPSBleHBsb2RlKCcsJywgJHZhbHVlKTsgJHByZXBhcmVfdmFsdWVzID0gYXJyYXkoKTsgZm9yZWFjaCAoJHZhbHVlcyBhcyAkX3ZhbHVlKSB7IGZvcmVhY2ggKCRhdHRyWyRwYXJhbV1bJ29wdGlvbnMnXSBhcyAkX2sgPT4gJF92KSB7IGlmICgkX3YgPT0gJF92YWx1ZSkgeyAkcHJlcGFyZV92YWx1ZXNbXSA9ICRfazsgYnJlYWs7IH0gfSB9IGlmICghZW1wdHkoJHByZXBhcmVfdmFsdWVzKSkgeyAkcXVlcnlbJHBhcmFtXSA9IGltcGxvZGUoJywnLCAkcHJlcGFyZV92YWx1ZXMpOyB9IGVsc2UgeyAkcXVlcnlbJHBhcmFtXSA9IG51bGw7IH0gfSBlbHNlaWYgKGlzc2V0KCRhdHRyWyRwYXJhbV0pICYmIGluX2FycmF5KCRhdHRyWyRwYXJhbV1bJ3R5cGUnXSwgYXJyYXkoJ3ByaWNlJywgJ2RlY2ltYWwnKSkpIHsgaWYgKGlzX2FycmF5KCR2YWx1ZSkpIHsgaWYgKGlzc2V0KCR2YWx1ZVsnZnJvbSddKSkgeyAkcXVlcnlbJHBhcmFtIC4gJ19mcm9tJ10gPSAkdmFsdWVbJ2Zyb20nXTsgfSBpZiAoaXNzZXQoJHZhbHVlWyd0byddKSkgeyAkcXVlcnlbJHBhcmFtIC4gJ190byddID0gJHZhbHVlWyd0byddOyB9IH0gZWxzZWlmICgoJGF0dHJpYnV0ZSA9ICR0aGlzLT5nZXRQcm9kdWN0QXR0cmlidXRlKCRwYXJhbSkpICYmIGluX2FycmF5KCRhdHRyaWJ1dGUtPmdldFJhbmdlT3B0aW9ucygpLCBhcnJheShHb01hZ2VfTmF2aWdhdGlvbl9Nb2RlbF9BZG1pbmh0bWxfU3lzdGVtX0NvbmZpZ19Tb3VyY2VfRmlsdGVyX09wdGlvbnNyYW5nZTo6TUFOVUFMTFksIEdvTWFnZV9OYXZpZ2F0aW9uX01vZGVsX0FkbWluaHRtbF9TeXN0ZW1fQ29uZmlnX1NvdXJjZV9GaWx0ZXJfT3B0aW9uc3JhbmdlOjpBVVRPKSApICYmICRhdHRyaWJ1dGUtPmdldEZpbHRlclR5cGUoKSA9PSBHb01hZ2VfTmF2aWdhdGlvbl9Nb2RlbF9MYXllcjo6RklMVEVSX1RZUEVfREVGQVVMVCApIHsgJHZhbHVlcyA9IGV4cGxvZGUoJywnLCAkdmFsdWUpOyAkcXVlcnlbJHBhcmFtIC4gJ19mcm9tJ10gPSAkdmFsdWVzWzBdOyAkcXVlcnlbJHBhcmFtIC4gJ190byddID0gJHZhbHVlc1sxXTsgJHF1ZXJ5WyRwYXJhbV0gPSBudWxsOyB9IGVsc2UgeyAkcXVlcnlbJHBhcmFtXSA9ICR2YWx1ZTsgfSB9IGVsc2UgeyAkcXVlcnlbJHBhcmFtXSA9ICR2YWx1ZTsgfSB9ICRwYXJhbXNbJ19xdWVyeSddID0gJHF1ZXJ5OyAkcGFyYW1zWydfcXVlcnknXVsnYWpheCddID0gbnVsbDsgcmV0dXJuIE1hZ2U6OmhlbHBlcignZ29tYWdlX25hdmlnYXRpb24vdXJsJyktPndyYXBwKCRtb2RlbC0+Z2V0VXJsKCRyb3V0ZSwgJHBhcmFtcykpOyB9IHB1YmxpYyBmdW5jdGlvbiBmb3JtYXRVcmxWYWx1ZSgkdmFsdWUsICRkZWZhdWx0KSB7ICRvbGRMb2NhbGUgPSBzZXRsb2NhbGUoTENfQ09MTEFURSwgIjAiKTsgJGxvY2FsZUNvZGUgPSBNYWdlOjphcHAoKS0+Z2V0TG9jYWxlKCktPmdldExvY2FsZUNvZGUoKTsgc2V0bG9jYWxlKExDX0NPTExBVEUsICRsb2NhbGVDb2RlIC4gJy5VVEY4JywgJ0MuVVRGLTgnLCAnZW5fVVMudXRmOCcpOyAkdmFsdWUgPSBpY29udihtYl9kZXRlY3RfZW5jb2RpbmcoJHZhbHVlKSwgJ0FTQ0lJLy9UUkFOU0xJVCcsICR2YWx1ZSk7IHNldGxvY2FsZShMQ19DT0xMQVRFLCAkb2xkTG9jYWxlKTsgJHZhbHVlID0gc3RydG9sb3dlcigkdmFsdWUpOyAkdmFsdWUgPSBwcmVnX3JlcGxhY2UoJyNbXjAtOWEtel0rI2knLCAnLScsIE1hZ2U6OmhlbHBlcignY2F0YWxvZy9wcm9kdWN0X3VybCcpLT5mb3JtYXQoJHZhbHVlKSk7ICR2YWx1ZSA9IHRyaW0oJHZhbHVlLCAnLScpOyByZXR1cm4gJHZhbHVlID8gJHZhbHVlIDogJGRlZmF1bHQ7IH0gcHVibGljIGZ1bmN0aW9uIGlzTW9iaWxlRGV2aWNlKCkgeyAkZGV0ZWN0ID0gbmV3IE5hdmlnYXRpb25fTW9iaWxlX0RldGVjdCgpOyByZXR1cm4gJGRldGVjdC0+aXNNb2JpbGUoKTsgfSBwdWJsaWMgZnVuY3Rpb24gZ2V0RmlsdGVySXRlbUNvdW50KCRmaWx0ZXIpIHsgJGNvdW50ID0gMDsgaWYgKCRmaWx0ZXIgJiYgJGZpbHRlci0+Z2V0SXRlbXMoKSkgeyBmb3JlYWNoICgkZmlsdGVyLT5nZXRJdGVtcygpIGFzICRpdGVtKSB7ICRjb3VudCArPSAkaXRlbS0+Z2V0Q291bnQoKTsgfSB9IGlmICgkY291bnQgPT0gMCAmJiAkZmlsdGVyLT5nZXRGaWx0ZXIoKS0+Z2V0UmVxdWVzdFZhclZhbHVlKCkgPT0gJ3N0b2NrX3N0YXR1cycpIHsgcmV0dXJuIDE7IH0gcmV0dXJuICRjb3VudDsgfSBwdWJsaWMgZnVuY3Rpb24gZ2V0RmlsdGVyKCkgeyAkZmlsdGVyID0gTWFnZTo6Z2V0U3RvcmVDb25maWcoJ2dvbWFnZV9uYXZpZ2F0aW9uL2ZpbHRlci9maWx0ZXJfYnRuX3R4dCcpOyBpZiAoJGZpbHRlciA9PSAnJykgeyAkZmlsdGVyID0gJHRoaXMtPl9fKCdGaWx0ZXInKTsgfSByZXR1cm4gJGZpbHRlcjsgfSBwdWJsaWMgZnVuY3Rpb24gZ2V0Q2xlYXJBbGwoKSB7ICRjbGVhciA9IE1hZ2U6OmdldFN0b3JlQ29uZmlnKCdnb21hZ2VfbmF2aWdhdGlvbi9maWx0ZXIvY2xlYXJfYnRuX3R4dCcpOyBpZiAoJGNsZWFyID09ICcnKSB7ICRjbGVhciA9ICR0aGlzLT5fXygnQ2xlYXIgQWxsJyk7IH0gcmV0dXJuICRjbGVhcjsgfSBwdWJsaWMgZnVuY3Rpb24gZ2V0TW9yZSgpIHsgJG1vcmUgPSBNYWdlOjpnZXRTdG9yZUNvbmZpZygnZ29tYWdlX25hdmlnYXRpb24vZmlsdGVyL21vcmVfYnRuX3R4dCcpOyBpZiAoJG1vcmUgPT0gJycpIHsgJG1vcmUgPSAkdGhpcy0+X18oJ01vcmUnKTsgfSByZXR1cm4gJG1vcmU7IH0gcHVibGljIGZ1bmN0aW9uIGdldExlc3MoKSB7ICRsZXNzID0gTWFnZTo6Z2V0U3RvcmVDb25maWcoJ2dvbWFnZV9uYXZpZ2F0aW9uL2ZpbHRlci9sZXNzX2J0bl90eHQnKTsgaWYgKCRsZXNzID09ICcnKSB7ICRsZXNzID0gJHRoaXMtPl9fKCdMZXNzJyk7IH0gcmV0dXJuICRsZXNzOyB9IHB1YmxpYyBmdW5jdGlvbiBnZXRTaG93bW9yZSgpIHsgJHNob3dtb3JlID0gTWFnZTo6Z2V0U3RvcmVDb25maWcoJ2dvbWFnZV9uYXZpZ2F0aW9uL2ZpbHRlci9zaG93bW9yZV9idG5fdHh0Jyk7IGlmICgkc2hvd21vcmUgPT0gJycpIHsgJHNob3dtb3JlID0gJHRoaXMtPl9fKCdTaG93IG1vcmUgcHJvZHVjdHMnKTsgfSByZXR1cm4gJHNob3dtb3JlOyB9IHB1YmxpYyBmdW5jdGlvbiBnZXRCYWNrdG90b3AoKSB7ICRiYWNrdG90b3AgPSBNYWdlOjpnZXRTdG9yZUNvbmZpZygnZ29tYWdlX25hdmlnYXRpb24vZmlsdGVyL2JhY2t0b3RvcF9idG5fdHh0Jyk7IGlmICgkYmFja3RvdG9wID09ICcnKSB7ICRiYWNrdG90b3AgPSAkdGhpcy0+X18oJ0JhY2sgdG8gVG9wJyk7IH0gcmV0dXJuICRiYWNrdG90b3A7IH0gcHVibGljIGZ1bmN0aW9uIGlzRW50ZXJwcmlzZSgpIHsgaWYgKE1hZ2U6OmdldENvbmZpZygpLT5nZXRNb2R1bGVDb25maWcoJ0VudGVycHJpc2VfRW50ZXJwcmlzZScpICYmIE1hZ2U6OmdldENvbmZpZygpLT5nZXRNb2R1bGVDb25maWcoJ0VudGVycHJpc2VfQWRtaW5Hd3MnKSAmJiBNYWdlOjpnZXRDb25maWcoKS0+Z2V0TW9kdWxlQ29uZmlnKCdFbnRlcnByaXNlX0NoZWNrb3V0JykgJiYgTWFnZTo6Z2V0Q29uZmlnKCktPmdldE1vZHVsZUNvbmZpZygnRW50ZXJwcmlzZV9DdXN0b21lcicpKSB7IHJldHVybiB0cnVlOyB9IHJldHVybiBmYWxzZTsgfSBwdWJsaWMgZnVuY3Rpb24gZ2V0U2lkZSgkdHlwZSkgeyBzd2l0Y2ggKCR0eXBlKSB7IGNhc2UgR29NYWdlX05hdmlnYXRpb25fTW9kZWxfQWRtaW5odG1sX1N5c3RlbV9Db25maWdfU291cmNlX0ZpbHRlcl9BdHRyaWJ1dGVsb2NhdGlvbjo6TEVGVF9CTE9DSzogcmV0dXJuICdsZWZ0JzsgYnJlYWs7IGNhc2UgR29NYWdlX05hdmlnYXRpb25fTW9kZWxfQWRtaW5odG1sX1N5c3RlbV9Db25maWdfU291cmNlX0ZpbHRlcl9BdHRyaWJ1dGVsb2NhdGlvbjo6Q09OVEVOVDogcmV0dXJuICdjb250ZW50JzsgYnJlYWs7IGNhc2UgR29NYWdlX05hdmlnYXRpb25fTW9kZWxfQWRtaW5odG1sX1N5c3RlbV9Db25maWdfU291cmNlX0ZpbHRlcl9BdHRyaWJ1dGVsb2NhdGlvbjo6UklHSFRfQkxPQ0s6IHJldHVybiAncmlnaHQnOyBicmVhazsgZGVmYXVsdDogcmV0dXJuICdsZWZ0JzsgYnJlYWs7IH0gfSBwdWJsaWMgZnVuY3Rpb24gbm90aWZ5KCkgeyAkZnJlcXVlbmN5ID0gaW50dmFsKE1hZ2U6OmFwcCgpLT5sb2FkQ2FjaGUoJ2dvbWFnZV9ub3RpZmljYXRpb25zX2ZyZXF1ZW5jeScpKTsgaWYgKCEkZnJlcXVlbmN5KSB7ICRmcmVxdWVuY3kgPSAyNDsgfSAkbGFzdF91cGRhdGUgPSBpbnR2YWwoTWFnZTo6YXBwKCktPmxvYWRDYWNoZSgnZ29tYWdlX25vdGlmaWNhdGlvbnNfbGFzdF91cGRhdGUnKSk7IGlmICgoJGZyZXF1ZW5jeSAqIDYwICogNjAgKyAkbGFzdF91cGRhdGUpID4gdGltZSgpKSB7IHJldHVybiBmYWxzZTsgfSAkdGltZXN0YW1wID0gJGxhc3RfdXBkYXRlOyBpZiAoISR0aW1lc3RhbXApIHsgJHRpbWVzdGFtcCA9IHRpbWUoKTsgfSB0cnkgeyAkY2ggPSBjdXJsX2luaXQoKTsgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1VSTCwgc3ByaW50ZignaHR0cHM6Ly93d3cuZ29tYWdlLmNvbS9pbmRleC5waHAvZ29tYWdlX25vdGlmaWNhdGlvbi9pbmRleC9kYXRhJykpOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfUE9TVCwgdHJ1ZSk7IGN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9QT1NURklFTERTLCAnc2t1PWFkdmFuY2VkLW5hdmlnYXRpb24mdGltZXN0YW1wPScgLiAkdGltZXN0YW1wIC4gJyZ2ZXI9JyAuIHVybGVuY29kZSgnNC42JykpOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfVElNRU9VVCwgMzApOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfUkVUVVJOVFJBTlNGRVIsIHRydWUpOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfU1NMX1ZFUklGWVBFRVIsIDApOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfU1NMX1ZFUklGWUhPU1QsIDApOyAkY29udGVudCA9IGN1cmxfZXhlYygkY2gpOyAkcmVzdWx0ID0gWmVuZF9Kc29uOjpkZWNvZGUoJGNvbnRlbnQpOyBpZiAoJHJlc3VsdCAmJiBpc3NldCgkcmVzdWx0WydmcmVxdWVuY3knXSkgJiYgKCRyZXN1bHRbJ2ZyZXF1ZW5jeSddICE9ICRmcmVxdWVuY3kpKSB7IE1hZ2U6OmFwcCgpLT5zYXZlQ2FjaGUoJHJlc3VsdFsnZnJlcXVlbmN5J10sICdnb21hZ2Vfbm90aWZpY2F0aW9uc19mcmVxdWVuY3knKTsgfSBpZiAoJHJlc3VsdCAmJiBpc3NldCgkcmVzdWx0WydkYXRhJ10pKSB7IGlmICghZW1wdHkoJHJlc3VsdFsnZGF0YSddKSkgeyBNYWdlOjpnZXRNb2RlbCgnYWRtaW5ub3RpZmljYXRpb24vaW5ib3gnKS0+cGFyc2UoJHJlc3VsdFsnZGF0YSddKTsgfSB9IH0gY2F0Y2ggKEV4Y2VwdGlvbiAkZSkgeyB9IE1hZ2U6OmFwcCgpLT5zYXZlQ2FjaGUodGltZSgpLCAnZ29tYWdlX25vdGlmaWNhdGlvbnNfbGFzdF91cGRhdGUnKTsgfSBwdWJsaWMgZnVuY3Rpb24gZ2V0SXNBbnltb3JlVmVyc2lvbigkbWFqb3IsICRtaW5vciwgJHJldmlzaW9uID0gMCkgeyAkdmVyc2lvbl9pbmZvID0gTWFnZTo6Z2V0VmVyc2lvbigpOyAkdmVyc2lvbl9pbmZvID0gZXhwbG9kZSgnLicsICR2ZXJzaW9uX2luZm8pOyBpZiAoJHZlcnNpb25faW5mb1swXSA+ICRtYWpvcikgeyByZXR1cm4gdHJ1ZTsgfSBlbHNlaWYgKCR2ZXJzaW9uX2luZm9bMF0gPT0gJG1ham9yKSB7IGlmICgkdmVyc2lvbl9pbmZvWzFdID4gJG1pbm9yKSB7IHJldHVybiB0cnVlOyB9IGVsc2VpZiAoJHZlcnNpb25faW5mb1sxXSA9PSAkbWlub3IpIHsgaWYgKCR2ZXJzaW9uX2luZm9bMl0gPj0gJHJldmlzaW9uKSB7IHJldHVybiB0cnVlOyB9IGVsc2UgeyByZXR1cm4gZmFsc2U7IH0gfSBlbHNlIHsgcmV0dXJuIGZhbHNlOyB9IH0gZWxzZSB7IHJldHVybiBmYWxzZTsgfSB9IHB1YmxpYyBmdW5jdGlvbiBnZXRQcm9kdWN0QXR0cmlidXRlKCRjb2RlKSB7IGlmICghaXNzZXQoJHRoaXMtPnByb2R1Y3RfYXR0cmlidXRlc1skY29kZV0pKSB7ICRhdHRyaWJ1dGVNb2RlbCA9IE1hZ2U6OmdldE1vZGVsKCdlYXYvZW50aXR5X2F0dHJpYnV0ZScpLT5sb2FkQnlDb2RlKCdjYXRhbG9nX3Byb2R1Y3QnLCAkY29kZSk7ICRhdHRyaWJ1dGUgPSBNYWdlOjpnZXRNb2RlbCgnY2F0YWxvZy9yZXNvdXJjZV9lYXZfYXR0cmlidXRlJyktPmxvYWQoJGF0dHJpYnV0ZU1vZGVsLT5nZXRJZCgpKTsgJHRoaXMtPnByb2R1Y3RfYXR0cmlidXRlc1skY29kZV0gPSAkYXR0cmlidXRlOyB9IHJldHVybiAkdGhpcy0+cHJvZHVjdF9hdHRyaWJ1dGVzWyRjb2RlXTsgfSB9"));