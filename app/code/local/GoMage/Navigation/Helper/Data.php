<?php eval(base64_decode("LyoqICogR29NYWdlIEFkdmFuY2VkIE5hdmlnYXRpb24gRXh0ZW5zaW9uICogKiBAY2F0ZWdvcnkgRXh0ZW5zaW9uICogQGNvcHlyaWdodCBDb3B5cmlnaHQgKGMpIDIwMTAtMjAxMyBHb01hZ2UgKGh0dHA6Ly93d3cuZ29tYWdlLmNvbSkgKiBAYXV0aG9yIEdvTWFnZSAqIEBsaWNlbnNlIGh0dHA6Ly93d3cuZ29tYWdlLmNvbS9saWNlbnNlLWFncmVlbWVudC8gU2luZ2xlIGRvbWFpbiBsaWNlbnNlICogQHRlcm1zIG9mIHVzZSBodHRwOi8vd3d3LmdvbWFnZS5jb20vdGVybXMtb2YtdXNlICogQHZlcnNpb24gUmVsZWFzZTogNC4wICogQHNpbmNlIENsYXNzIGF2YWlsYWJsZSBzaW5jZSBSZWxlYXNlIDEuMCAqLyBjbGFzcyBHb01hZ2VfTmF2aWdhdGlvbl9IZWxwZXJfRGF0YSBleHRlbmRzIE1hZ2VfQ29yZV9IZWxwZXJfQWJzdHJhY3R7IHB1YmxpYyBmdW5jdGlvbiBnZXRDb25maWdEYXRhKCRub2RlKXsgcmV0dXJuIE1hZ2U6OmdldFN0b3JlQ29uZmlnKCdnb21hZ2VfbmF2aWdhdGlvbi8nLiRub2RlKTsgfSBwdWJsaWMgZnVuY3Rpb24gZ2V0QWxsU3RvcmVEb21haW5zKCl7ICRkb21haW5zID0gYXJyYXkoKTsgZm9yZWFjaCAoTWFnZTo6YXBwKCktPmdldFdlYnNpdGVzKCkgYXMgJHdlYnNpdGUpIHsgJHVybCA9ICR3ZWJzaXRlLT5nZXRDb25maWcoJ3dlYi91bnNlY3VyZS9iYXNlX3VybCcpOyBpZigkZG9tYWluID0gdHJpbShwcmVnX3JlcGxhY2UoJy9eLio/XFwvXFwvKC4qKT9cXC8vJywgJyQxJywgJHVybCkpKXsgJGRvbWFpbnNbXSA9ICRkb21haW47IH0gJHVybCA9ICR3ZWJzaXRlLT5nZXRDb25maWcoJ3dlYi9zZWN1cmUvYmFzZV91cmwnKTsgaWYoJGRvbWFpbiA9IHRyaW0ocHJlZ19yZXBsYWNlKCcvXi4qP1xcL1xcLyguKik/XFwvLycsICckMScsICR1cmwpKSl7ICRkb21haW5zW10gPSAkZG9tYWluOyB9IH0gcmV0dXJuIGFycmF5X3VuaXF1ZSgkZG9tYWlucyk7IH0gcHVibGljIGZ1bmN0aW9uIGdldEF2YWlsYWJlbFdlYnNpdGVzKCl7IHJldHVybiAkdGhpcy0+X3coKTsgfSBwdWJsaWMgZnVuY3Rpb24gZ2V0QXZhaWxhdmVsV2Vic2l0ZXMoKXsgcmV0dXJuICR0aGlzLT5fdygpOyB9IHByb3RlY3RlZCBmdW5jdGlvbiBfdygpeyBpZighTWFnZTo6Z2V0U3RvcmVDb25maWcoJ2dvbWFnZV9hY3RpdmF0aW9uL2FkdmFuY2VkbmF2aWdhdGlvbi9pbnN0YWxsZWQnKSB8fCAoaW50dmFsKE1hZ2U6OmdldFN0b3JlQ29uZmlnKCdnb21hZ2VfYWN0aXZhdGlvbi9hZHZhbmNlZG5hdmlnYXRpb24vY291bnQnKSkgPiAxMCkpIHsgcmV0dXJuIGFycmF5KCk7IH0gJHRpbWVfdG9fdXBkYXRlID0gNjAqNjAqMjQqMTU7ICRyID0gTWFnZTo6Z2V0U3RvcmVDb25maWcoJ2dvbWFnZV9hY3RpdmF0aW9uL2FkdmFuY2VkbmF2aWdhdGlvbi9hcicpOyAkdCA9IE1hZ2U6OmdldFN0b3JlQ29uZmlnKCdnb21hZ2VfYWN0aXZhdGlvbi9hZHZhbmNlZG5hdmlnYXRpb24vdGltZScpOyAkcyA9IE1hZ2U6OmdldFN0b3JlQ29uZmlnKCdnb21hZ2VfYWN0aXZhdGlvbi9hZHZhbmNlZG5hdmlnYXRpb24vd2Vic2l0ZXMnKTsgJGxhc3RfY2hlY2sgPSBzdHJfcmVwbGFjZSgkciwgJycsIE1hZ2U6OmhlbHBlcignY29yZScpLT5kZWNyeXB0KCR0KSk7ICRhbGxzaXRlcyA9IGV4cGxvZGUoJywnLCBzdHJfcmVwbGFjZSgkciwgJycsIE1hZ2U6OmhlbHBlcignY29yZScpLT5kZWNyeXB0KCRzKSkpOyAkYWxsc2l0ZXMgPSBhcnJheV9kaWZmKCRhbGxzaXRlcywgYXJyYXkoIiIpKTsgaWYoKCRsYXN0X2NoZWNrKyR0aW1lX3RvX3VwZGF0ZSkgPCB0aW1lKCkpeyAkdGhpcy0+YShNYWdlOjpnZXRTdG9yZUNvbmZpZygnZ29tYWdlX2FjdGl2YXRpb24vYWR2YW5jZWRuYXZpZ2F0aW9uL2tleScpLCBpbnR2YWwoTWFnZTo6Z2V0U3RvcmVDb25maWcoJ2dvbWFnZV9hY3RpdmF0aW9uL2FkdmFuY2VkbmF2aWdhdGlvbi9jb3VudCcpKSwgaW1wbG9kZSgnLCcsICRhbGxzaXRlcykpOyB9IHJldHVybiAkYWxsc2l0ZXM7IH0gcHVibGljIGZ1bmN0aW9uIGEoJGssICRjID0gMCwgJHMgPSAnJyl7ICRjaCA9IGN1cmxfaW5pdCgpOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfVVJMLCBzcHJpbnRmKCdodHRwczovL3d3dy5nb21hZ2UuY29tL2luZGV4LnBocC9nb21hZ2VfZG93bmxvYWRhYmxlL2tleS9jaGVjaycpKTsgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1BPU1QsIHRydWUpOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfUE9TVEZJRUxEUywgJ2tleT0nLnVybGVuY29kZSgkaykuJyZza3U9YWR2YW5jZWQtbmF2aWdhdGlvbiZkb21haW5zPScudXJsZW5jb2RlKGltcGxvZGUoJywnLCAkdGhpcy0+Z2V0QWxsU3RvcmVEb21haW5zKCkpKS4nJnZlcj0nLnVybGVuY29kZSgnNC4xJykpOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfVElNRU9VVCwgMzApOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfUkVUVVJOVFJBTlNGRVIsIHRydWUpOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfU1NMX1ZFUklGWVBFRVIsIDApOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfU1NMX1ZFUklGWUhPU1QsIDApOyAkY29udGVudCA9IGN1cmxfZXhlYygkY2gpOyAkciA9IFplbmRfSnNvbjo6ZGVjb2RlKCRjb250ZW50KTsgJGUgPSBNYWdlOjpoZWxwZXIoJ2NvcmUnKTsgaWYoZW1wdHkoJHIpKXsgJHZhbHVlMSA9IE1hZ2U6OmdldFN0b3JlQ29uZmlnKCdnb21hZ2VfYWN0aXZhdGlvbi9hZHZhbmNlZG5hdmlnYXRpb24vYXInKTsgJGdyb3VwcyA9IGFycmF5KCAnYWR2YW5jZWRuYXZpZ2F0aW9uJz0+YXJyYXkoICdmaWVsZHMnPT5hcnJheSggJ2FyJz0+YXJyYXkoICd2YWx1ZSc9PiR2YWx1ZTEgKSwgJ3dlYnNpdGVzJz0+YXJyYXkoICd2YWx1ZSc9PihzdHJpbmcpTWFnZTo6Z2V0U3RvcmVDb25maWcoJ2dvbWFnZV9hY3RpdmF0aW9uL2FkdmFuY2VkbmF2aWdhdGlvbi93ZWJzaXRlcycpICksICd0aW1lJz0+YXJyYXkoICd2YWx1ZSc9PihzdHJpbmcpJGUtPmVuY3J5cHQoJHZhbHVlMS4odGltZSgpLSg2MCo2MCoyNCoxNS0xODAwKSkuJHZhbHVlMSkgKSwgJ2NvdW50Jz0+YXJyYXkoICd2YWx1ZSc9PiRjKzEpICkgKSApOyBNYWdlOjpnZXRNb2RlbCgnYWRtaW5odG1sL2NvbmZpZ19kYXRhJykgLT5zZXRTZWN0aW9uKCdnb21hZ2VfYWN0aXZhdGlvbicpIC0+c2V0R3JvdXBzKCRncm91cHMpIC0+c2F2ZSgpOyBNYWdlOjpnZXRDb25maWcoKS0+cmVpbml0KCk7IE1hZ2U6OmFwcCgpLT5yZWluaXRTdG9yZXMoKTsgcmV0dXJuOyB9ICR2YWx1ZTEgPSAnJzsgJHZhbHVlMiA9ICcnOyBpZihpc3NldCgkclsnZCddKSAmJiBpc3NldCgkclsnYyddKSl7ICR2YWx1ZTEgPSAkZS0+ZW5jcnlwdChiYXNlNjRfZW5jb2RlKFplbmRfSnNvbjo6ZW5jb2RlKCRyKSkpOyBpZiAoISRzKSAkcyA9IE1hZ2U6OmdldFN0b3JlQ29uZmlnKCdnb21hZ2VfYWN0aXZhdGlvbi9hZHZhbmNlZG5hdmlnYXRpb24vd2Vic2l0ZXMnKTsgJHMgPSBhcnJheV9zbGljZShleHBsb2RlKCcsJywgJHMpLCAwLCAkclsnYyddKTsgJHZhbHVlMiA9ICRlLT5lbmNyeXB0KCR2YWx1ZTEuaW1wbG9kZSgnLCcsICRzKS4kdmFsdWUxKTsgfSAkZ3JvdXBzID0gYXJyYXkoICdhZHZhbmNlZG5hdmlnYXRpb24nPT5hcnJheSggJ2ZpZWxkcyc9PmFycmF5KCAnYXInPT5hcnJheSggJ3ZhbHVlJz0+JHZhbHVlMSApLCAnd2Vic2l0ZXMnPT5hcnJheSggJ3ZhbHVlJz0+KHN0cmluZykkdmFsdWUyICksICd0aW1lJz0+YXJyYXkoICd2YWx1ZSc9PihzdHJpbmcpJGUtPmVuY3J5cHQoJHZhbHVlMS50aW1lKCkuJHZhbHVlMSkgKSwgJ2luc3RhbGxlZCc9PmFycmF5KCAndmFsdWUnPT4xICksICdjb3VudCc9PmFycmF5KCAndmFsdWUnPT4wKSApICkgKTsgTWFnZTo6Z2V0TW9kZWwoJ2FkbWluaHRtbC9jb25maWdfZGF0YScpIC0+c2V0U2VjdGlvbignZ29tYWdlX2FjdGl2YXRpb24nKSAtPnNldEdyb3VwcygkZ3JvdXBzKSAtPnNhdmUoKTsgTWFnZTo6Z2V0Q29uZmlnKCktPnJlaW5pdCgpOyBNYWdlOjphcHAoKS0+cmVpbml0U3RvcmVzKCk7IH0gcHVibGljIGZ1bmN0aW9uIGdhKCl7IHJldHVybiBaZW5kX0pzb246OmRlY29kZShiYXNlNjRfZGVjb2RlKE1hZ2U6OmhlbHBlcignY29yZScpLT5kZWNyeXB0KE1hZ2U6OmdldFN0b3JlQ29uZmlnKCdnb21hZ2VfYWN0aXZhdGlvbi9hZHZhbmNlZG5hdmlnYXRpb24vYXInKSkpKTsgfSBwdWJsaWMgZnVuY3Rpb24gaXNHb21hZ2VOYXZpZ2F0aW9uKCl7IGlmICgkdGhpcy0+aXNNb2JpbGVEZXZpY2UoKSAmJiBNYWdlOjpnZXRTdG9yZUNvbmZpZ0ZsYWcoJ2dvbWFnZV9uYXZpZ2F0aW9uL2dlbmVyYWwvZGlzYWJsZV9tb2JpbGUnKSl7IHJldHVybiBmYWxzZTsgfSByZXR1cm4gaW5fYXJyYXkoTWFnZTo6YXBwKCktPmdldFN0b3JlKCktPmdldFdlYnNpdGVJZCgpLCAkdGhpcy0+Z2V0QXZhaWxhdmVsV2Vic2l0ZXMoKSkgJiYgTWFnZTo6Z2V0U3RvcmVDb25maWdGbGFnKCdnb21hZ2VfbmF2aWdhdGlvbi9nZW5lcmFsL21vZGUnKTsgfSBwdWJsaWMgZnVuY3Rpb24gaXNHb21hZ2VOYXZpZ2F0aW9uQWpheCgpeyByZXR1cm4gJHRoaXMtPmlzR29tYWdlTmF2aWdhdGlvbigpICYmIE1hZ2U6OmdldFN0b3JlQ29uZmlnRmxhZygnZ29tYWdlX25hdmlnYXRpb24vZ2VuZXJhbC9wYWdlcicpICYmIChNYWdlOjpyZWdpc3RyeSgnY3VycmVudF9jYXRlZ29yeScpIHx8IChNYWdlOjphcHAoKS0+Z2V0RnJvbnRDb250cm9sbGVyKCktPmdldFJlcXVlc3QoKS0+Z2V0Um91dGVOYW1lKCkgPT0gJ2NhdGFsb2dzZWFyY2gnICYmIE1hZ2U6OmFwcCgpLT5nZXRGcm9udENvbnRyb2xsZXIoKS0+Z2V0UmVxdWVzdCgpLT5nZXRDb250cm9sbGVyTmFtZSgpICE9ICdhZHZhbmNlZCcpKTsgfSBwdWJsaWMgZnVuY3Rpb24gaXNHb21hZ2VOYXZpZ2F0aW9uQ2xlYXJBamF4KCl7IHJldHVybiAkdGhpcy0+aXNHb21hZ2VOYXZpZ2F0aW9uKCkmJiAoTWFnZTo6cmVnaXN0cnkoJ2N1cnJlbnRfY2F0ZWdvcnknKSB8fCAoTWFnZTo6YXBwKCktPmdldEZyb250Q29udHJvbGxlcigpLT5nZXRSZXF1ZXN0KCktPmdldFJvdXRlTmFtZSgpID09ICdjYXRhbG9nc2VhcmNoJyAmJiBNYWdlOjphcHAoKS0+Z2V0RnJvbnRDb250cm9sbGVyKCktPmdldFJlcXVlc3QoKS0+Z2V0Q29udHJvbGxlck5hbWUoKSAhPSAnYWR2YW5jZWQnKSk7IH0gcHVibGljIGZ1bmN0aW9uIGZvcm1hdENvbG9yKCR2YWx1ZSl7IGlmICgkdmFsdWUgPSBwcmVnX3JlcGxhY2UoJy9bXmEtekEtWjAtOVxzXS8nLCAnJywgJHZhbHVlKSl7ICR2YWx1ZSA9ICcjJyAuICR2YWx1ZTsgfSByZXR1cm4gJHZhbHVlOyB9IHB1YmxpYyBmdW5jdGlvbiBpc0ZyZW5kbHlVcmwoKXsgcmV0dXJuICR0aGlzLT5pc0dvbWFnZU5hdmlnYXRpb24oKSAmJiBNYWdlOjpnZXRTdG9yZUNvbmZpZ0ZsYWcoJ2dvbWFnZV9uYXZpZ2F0aW9uL2ZpbHRlcl9zZXR0aW5ncy9mcmVuZGx5dXJsJyk7IH0gcHVibGljIGZ1bmN0aW9uIGdldEZpbHRlclVybCgkcm91dGUgPSAnJywgJHBhcmFtcyA9IGFycmF5KCksICRmaWx0ZXIgPSBmYWxzZSl7IGlmICghJHRoaXMtPmlzRnJlbmRseVVybCgpKXsgJHVybCA9IE1hZ2U6OmdldFVybCgkcm91dGUsICRwYXJhbXMpOyAkYXJyID0gcGFyc2VfdXJsKCR1cmwpOyAkcGFycyA9IGV4cGxvZGUoJyZhbXA7JywkYXJyWydxdWVyeSddKTsgJG5ld1BhcmFtcyA9IGFycmF5KCk7IGZvcmVhY2goICRwYXJzIGFzICRfcGFyYW0pIHsgJF9wYXJhbSA9IHN0cl9yZXBsYWNlKCJhamF4PTEmIiwgIiIsICRfcGFyYW0pOyAkX3BhcmFtID0gc3RyX3JlcGxhY2UoImFqYXg9MSIsICIiLCAkX3BhcmFtKTsgaWYgKCAkX3BhcmFtICE9ICcnICkgeyAkbmV3UGFyYW1zW10gPSAkX3BhcmFtOyB9IH0gJHVybCA9ICRhcnJbJ3NjaGVtZSddIC4gJzovLycgLiAkYXJyWydob3N0J10gLiAkYXJyWydwYXRoJ10gLiAnPyc7IGlmICggJG5ld1BhcmFtcyApIHsgJGFyclsncXVlcnknXSA9IGltcGxvZGUoJyZhbXA7JywgJG5ld1BhcmFtcyk7ICR1cmwgLj0gJGFyclsncXVlcnknXTsgfSByZXR1cm4gJHVybDsgfSAkbW9kZWwgPSBNYWdlOjpnZXRNb2RlbCgnY29yZS91cmwnKTsgJHJlcXVlc3RfcXVlcnkgPSAkbW9kZWwtPmdldFJlcXVlc3QoKS0+Z2V0UXVlcnkoKTsgJGF0dHIgPSBNYWdlOjpyZWdpc3RyeSgnZ2FuX2ZpbHRlcl9hdHRyaWJ1dGVzJyk7IGZvcmVhY2goJG1vZGVsLT5nZXRSZXF1ZXN0KCktPmdldFF1ZXJ5KCkgYXMgJHBhcmFtID0+ICR2YWx1ZSl7IGlmICgkcGFyYW0gPT0gJ2NhdCcpeyAkdmFsdWVzID0gZXhwbG9kZSgnLCcsICR2YWx1ZSk7ICRwcmVwYXJlX3ZhbHVlcyA9IGFycmF5KCk7IGZvcmVhY2goJHZhbHVlcyBhcyAkX3ZhbHVlKXsgJGNhdGVnb3J5ID0gTWFnZTo6Z2V0TW9kZWwoJ2NhdGFsb2cvY2F0ZWdvcnknKS0+bG9hZCgkX3ZhbHVlKTsgaWYgKCRjYXRlZ29yeSAmJiAkY2F0ZWdvcnktPmdldElkKCkpeyAkcHJlcGFyZV92YWx1ZXNbXSA9ICRjYXRlZ29yeS0+Z2V0RGF0YSgndXJsX2tleScpOyB9IH0gJG1vZGVsLT5nZXRSZXF1ZXN0KCktPnNldFF1ZXJ5KCRwYXJhbSwgaW1wbG9kZSgnLCcsICRwcmVwYXJlX3ZhbHVlcykpOyB9ZWxzZWlmIChpc3NldCgkYXR0clskcGFyYW1dKSAmJiAhaW5fYXJyYXkoJGF0dHJbJHBhcmFtXVsndHlwZSddLCBhcnJheSgncHJpY2UnLCAnZGVjaW1hbCcpKSl7ICR2YWx1ZXMgPSBleHBsb2RlKCcsJywgJHZhbHVlKTsgJHByZXBhcmVfdmFsdWVzID0gYXJyYXkoKTsgZm9yZWFjaCgkdmFsdWVzIGFzICRfdmFsdWUpeyBmb3JlYWNoKCRhdHRyWyRwYXJhbV1bJ29wdGlvbnMnXSBhcyAkX2sgPT4gJF92KXsgaWYgKCRfdiA9PSAkX3ZhbHVlKXsgJHByZXBhcmVfdmFsdWVzW10gPSAkX2s7IGJyZWFrOyB9IH0gfSAkbW9kZWwtPmdldFJlcXVlc3QoKS0+c2V0UXVlcnkoJHBhcmFtLCBpbXBsb2RlKCcsJywgJHByZXBhcmVfdmFsdWVzKSk7IH0gZWxzZSBpZiAoICRwYXJhbSA9PSAncHJpY2UnICYmICRmaWx0ZXIgIT0gJ1ByaWNlJykgeyAkYXR0cmlidXRlSWQgPSBNYWdlOjpnZXRSZXNvdXJjZU1vZGVsKCdlYXYvZW50aXR5X2F0dHJpYnV0ZScpLT5nZXRJZEJ5Q29kZSgnY2F0YWxvZ19wcm9kdWN0JywncHJpY2UnKTsgJGF0dHJpYnV0ZSA9IE1hZ2U6OmdldE1vZGVsKCdjYXRhbG9nL3Jlc291cmNlX2Vhdl9hdHRyaWJ1dGUnKS0+bG9hZCgkYXR0cmlidXRlSWQpOyBpZiAoICgkYXR0cmlidXRlLT5nZXRSYW5nZU9wdGlvbnMoKSA9PSBHb01hZ2VfTmF2aWdhdGlvbl9Nb2RlbF9BZG1pbmh0bWxfU3lzdGVtX0NvbmZpZ19Tb3VyY2VfRmlsdGVyX09wdGlvbnNyYW5nZTo6TUFOVUFMTFkgfHwgJGF0dHJpYnV0ZS0+Z2V0UmFuZ2VPcHRpb25zKCkgPT0gR29NYWdlX05hdmlnYXRpb25fTW9kZWxfQWRtaW5odG1sX1N5c3RlbV9Db25maWdfU291cmNlX0ZpbHRlcl9PcHRpb25zcmFuZ2U6OkFVVE8pICYmICRhdHRyaWJ1dGUtPmdldEZpbHRlclR5cGUoKSA9PSBHb01hZ2VfTmF2aWdhdGlvbl9Nb2RlbF9MYXllcjo6RklMVEVSX1RZUEVfREVGQVVMVCApIHsgJHZhbHVlcyA9IGV4cGxvZGUoJywnLCAkdmFsdWUpOyAkcGFyYW1zWydfcXVlcnknXVsncHJpY2VfZnJvbSddID0gJHZhbHVlc1swXTsgJHBhcmFtc1snX3F1ZXJ5J11bJ3ByaWNlX3RvJ10gPSAkdmFsdWVzWzFdOyB1bnNldCgkcGFyYW1zWydfcXVlcnknXVsncHJpY2UnXSk7IH0gfSB9IGZvcmVhY2ggKCRwYXJhbXNbJ19xdWVyeSddIGFzICRwYXJhbSA9PiAkdmFsdWUpeyBpZiAoJHZhbHVlKXsgaWYgKCRwYXJhbSA9PSAnY2F0Jyl7ICR2YWx1ZXMgPSBleHBsb2RlKCcsJywgJHZhbHVlKTsgJHByZXBhcmVfdmFsdWVzID0gYXJyYXkoKTsgZm9yZWFjaCgkdmFsdWVzIGFzICRfdmFsdWUpeyAkY2F0ZWdvcnkgPSBNYWdlOjpnZXRNb2RlbCgnY2F0YWxvZy9jYXRlZ29yeScpLT5sb2FkKCRfdmFsdWUpOyBpZiAoJGNhdGVnb3J5ICYmICRjYXRlZ29yeS0+Z2V0SWQoKSl7ICRwcmVwYXJlX3ZhbHVlc1tdID0gJGNhdGVnb3J5LT5nZXREYXRhKCd1cmxfa2V5Jyk7IH0gfSAkcGFyYW1zWydfcXVlcnknXVskcGFyYW1dID0gaW1wbG9kZSgnLCcsICRwcmVwYXJlX3ZhbHVlcyk7IH1lbHNlaWYgKGlzc2V0KCRhdHRyWyRwYXJhbV0pICYmICFpbl9hcnJheSgkYXR0clskcGFyYW1dWyd0eXBlJ10sIGFycmF5KCdwcmljZScsICdkZWNpbWFsJykpKXsgJHZhbHVlcyA9IGV4cGxvZGUoJywnLCAkdmFsdWUpOyAkcHJlcGFyZV92YWx1ZXMgPSBhcnJheSgpOyBmb3JlYWNoKCR2YWx1ZXMgYXMgJF92YWx1ZSl7IGZvcmVhY2goJGF0dHJbJHBhcmFtXVsnb3B0aW9ucyddIGFzICRfayA9PiAkX3YpeyBpZiAoJF92ID09ICRfdmFsdWUpeyAkcHJlcGFyZV92YWx1ZXNbXSA9ICRfazsgYnJlYWs7IH0gfSB9ICRwYXJhbXNbJ19xdWVyeSddWyRwYXJhbV0gPSBpbXBsb2RlKCcsJywgJHByZXBhcmVfdmFsdWVzKTsgfSBlbHNlIGlmICggJHBhcmFtID09ICdwcmljZScgJiYgJGZpbHRlciAhPSAnUHJpY2UnICkgeyAkYXR0cmlidXRlSWQgPSBNYWdlOjpnZXRSZXNvdXJjZU1vZGVsKCdlYXYvZW50aXR5X2F0dHJpYnV0ZScpLT5nZXRJZEJ5Q29kZSgnY2F0YWxvZ19wcm9kdWN0JywncHJpY2UnKTsgJGF0dHJpYnV0ZSA9IE1hZ2U6OmdldE1vZGVsKCdjYXRhbG9nL3Jlc291cmNlX2Vhdl9hdHRyaWJ1dGUnKS0+bG9hZCgkYXR0cmlidXRlSWQpOyBpZiAoICgkYXR0cmlidXRlLT5nZXRSYW5nZU9wdGlvbnMoKSA9PSBHb01hZ2VfTmF2aWdhdGlvbl9Nb2RlbF9BZG1pbmh0bWxfU3lzdGVtX0NvbmZpZ19Tb3VyY2VfRmlsdGVyX09wdGlvbnNyYW5nZTo6TUFOVUFMTFkgfHwgJGF0dHJpYnV0ZS0+Z2V0UmFuZ2VPcHRpb25zKCkgPT0gR29NYWdlX05hdmlnYXRpb25fTW9kZWxfQWRtaW5odG1sX1N5c3RlbV9Db25maWdfU291cmNlX0ZpbHRlcl9PcHRpb25zcmFuZ2U6OkFVVE8pICYmICRhdHRyaWJ1dGUtPmdldEZpbHRlclR5cGUoKSA9PSBHb01hZ2VfTmF2aWdhdGlvbl9Nb2RlbF9MYXllcjo6RklMVEVSX1RZUEVfREVGQVVMVCApIHsgaWYgKHN0cnBvcygkdmFsdWUsICc7JykpeyAkdmFsdWVzID0gZXhwbG9kZSgnOycsICR2YWx1ZSk7IH1lbHNlIHsgJHZhbHVlcyA9IGV4cGxvZGUoJywnLCAkdmFsdWUpOyB9ICRwYXJhbXNbJ19xdWVyeSddWydwcmljZV9mcm9tJ10gPSAkdmFsdWVzWzBdOyAkcGFyYW1zWydfcXVlcnknXVsncHJpY2VfdG8nXSA9ICR2YWx1ZXNbMV07IHVuc2V0KCRwYXJhbXNbJ19xdWVyeSddWydwcmljZSddKTsgfSB9IH0gfSAkdXJsID0gJG1vZGVsLT5nZXRVcmwoJHJvdXRlLCAkcGFyYW1zKTsgJGFyciA9IHBhcnNlX3VybCgkdXJsKTsgJHBhcnMgPSBleHBsb2RlKCcmYW1wOycsJGFyclsncXVlcnknXSk7ICRuZXdQYXJhbXMgPSBhcnJheSgpOyBmb3JlYWNoKCAkcGFycyBhcyAkX3BhcmFtKSB7ICRfcGFyYW0gPSBzdHJfcmVwbGFjZSgiYWpheD0xJiIsICIiLCAkX3BhcmFtKTsgJF9wYXJhbSA9IHN0cl9yZXBsYWNlKCJhamF4PTEiLCAiIiwgJF9wYXJhbSk7IGlmICggJF9wYXJhbSAhPSAnJyApIHsgJG5ld1BhcmFtc1tdID0gJF9wYXJhbTsgfSB9ICR1cmwgPSAkYXJyWydzY2hlbWUnXSAuICc6Ly8nIC4gJGFyclsnaG9zdCddIC4gJGFyclsncGF0aCddIC4gJz8nOyBpZiAoICRuZXdQYXJhbXMgKSB7ICRhcnJbJ3F1ZXJ5J10gPSBpbXBsb2RlKCcmYW1wOycsICRuZXdQYXJhbXMpOyAkdXJsIC49ICRhcnJbJ3F1ZXJ5J107IH0gZm9yZWFjaCgkcmVxdWVzdF9xdWVyeSBhcyAkcGFyYW0gPT4gJHZhbHVlKXsgJG1vZGVsLT5nZXRSZXF1ZXN0KCktPnNldFF1ZXJ5KCRwYXJhbSwgJHZhbHVlKTsgfSByZXR1cm4gJHVybDsgfSBwdWJsaWMgZnVuY3Rpb24gZm9ybWF0VXJsVmFsdWUoJHZhbHVlKXsgJHZhbHVlID0gcHJlZ19yZXBsYWNlKCcjW14wLTlhLXpdKyNpJywgJ18nLCBNYWdlOjpoZWxwZXIoJ2NhdGFsb2cvcHJvZHVjdF91cmwnKS0+Zm9ybWF0KCR2YWx1ZSkpOyAkdmFsdWUgPSBzdHJ0b2xvd2VyKCR2YWx1ZSk7ICR2YWx1ZSA9IHRyaW0oJHZhbHVlLCAnLScpOyByZXR1cm4gJHZhbHVlOyB9IHB1YmxpYyBmdW5jdGlvbiBpc01vYmlsZURldmljZSgpeyAkdXNlcl9hZ2VudCA9IHN0cnRvbG93ZXIoJF9TRVJWRVJbJ0hUVFBfVVNFUl9BR0VOVCddKTsgaWYgKCEkdXNlcl9hZ2VudCB8fCBzdHJwb3MoJHVzZXJfYWdlbnQsICdpcGFkJykpIHJldHVybiBmYWxzZTsgJHJlZ2V4X21hdGNoPSIvKG5va2lhfGlwaG9uZXxhbmRyb2lkfG1vdG9yb2xhfF5tb3QtfHNvZnRiYW5rfGZvbWF8ZG9jb21vfGtkZGl8dXAuYnJvd3Nlcnx1cC5saW5rfCI7ICRyZWdleF9tYXRjaC49Imh0Y3xkb3BvZHxibGF6ZXJ8bmV0ZnJvbnR8aGVsaW98aG9zaW58aHVhd2VpfG5vdmFycmF8Q29vbFBhZHx3ZWJvc3x0ZWNoZmFpdGh8cGFsbXNvdXJjZXwiOyAkcmVnZXhfbWF0Y2guPSJibGFja2JlcnJ5fGFsY2F0ZWx8YW1vaXxrdG91Y2h8bmV4aWFufHNhbXN1bmd8XnNhbS18c1tjZ11ofF5sZ2V8ZXJpY3Nzb258cGhpbGlwc3xzYWdlbXx3ZWxsY29tfGJ1bmphbGxvb3xtYXVpfCI7ICRyZWdleF9tYXRjaC49InN5bWJpYW58c21hcnRwaG9uZXxtaWRwfHdhcHxwaG9uZXx3aW5kb3dzIGNlfGllbW9iaWxlfF5zcGljZXxeYmlyZHxeenRlLXxsb25nY29zfHBhbnRlY2h8Z2lvbmVlfF5zaWUtfHBvcnRhbG1tbXwiOyAkcmVnZXhfbWF0Y2guPSJqaWdzIGJyb3dzZXJ8aGlwdG9wfF51Y3dlYnxeYmVucXxoYWllcnxebGN0fG9wZXJhcyptb2JpfG9wZXJhKm1pbml8MzIweDMyMHwyNDB4MzIwfDE3NngyMjAiOyAkcmVnZXhfbWF0Y2guPSIpL2kiOyByZXR1cm4gcHJlZ19tYXRjaCgkcmVnZXhfbWF0Y2gsIHN0cnRvbG93ZXIoJHVzZXJfYWdlbnQpKTsgfSBwdWJsaWMgZnVuY3Rpb24gSXNHb29nbGVib3QoKXsgaWYocHJlZ19tYXRjaCgiL0dvb2dsZS8iLCRfU0VSVkVSWydIVFRQX1VTRVJfQUdFTlQnXSkgfHwgcHJlZ19tYXRjaCgiL2JvdC8iLCRfU0VSVkVSWydIVFRQX1VTRVJfQUdFTlQnXSkpeyAkaXAgPSAkX1NFUlZFUlsnUkVNT1RFX0FERFInXTsgJG5hbWUgPSBnZXRob3N0YnlhZGRyKCRpcCk7IGlmKHByZWdfbWF0Y2goIi9Hb29nbGVib3QvIiwkbmFtZSkgfHwgcHJlZ19tYXRjaCgiL2JvdC8iLCRuYW1lKSl7ICRob3N0cyA9IGdldGhvc3RieW5hbWVsKCRuYW1lKTsgZm9yZWFjaCgkaG9zdHMgYXMgJGhvc3QpeyBpZiAoJGhvc3QgPT0gJGlwKXsgcmV0dXJuIHRydWU7IH0gfSByZXR1cm4gZmFsc2U7IH1lbHNleyByZXR1cm4gZmFsc2U7IH0gfWVsc2V7IHJldHVybiB0cnVlOyB9IHJldHVybiBmYWxzZTsgfSBwdWJsaWMgZnVuY3Rpb24gZ2V0RmlsdGVySXRlbUNvdW50KCRmaWx0ZXIpIHsgJGNvdW50ID0gMDsgaWYgKCAkZmlsdGVyICYmICRmaWx0ZXItPmdldEl0ZW1zKCkgKSB7IGZvcmVhY2goICRmaWx0ZXItPmdldEl0ZW1zKCkgYXMgJGl0ZW0gKSB7ICRjb3VudCArPSAkaXRlbS0+Z2V0Q291bnQoKTsgfSB9IGlmICggJGNvdW50ID09IDAgJiYgJGZpbHRlci0+Z2V0TmFtZSgpID09ICdTdG9jaycgKSB7IHJldHVybiAxOyB9IHJldHVybiAkY291bnQ7IH0gcHVibGljIGZ1bmN0aW9uIGdldEZpbHRlcigpIHsgJGZpbHRlciA9IE1hZ2U6OmdldFN0b3JlQ29uZmlnKCdnb21hZ2VfbmF2aWdhdGlvbi9maWx0ZXIvZmlsdGVyX2J0bl90eHQnKTsgaWYgKCAkZmlsdGVyID09ICcnICkgeyAkZmlsdGVyID0gJHRoaXMtPl9fKCdGaWx0ZXInKTsgfSByZXR1cm4gJGZpbHRlcjsgfSBwdWJsaWMgZnVuY3Rpb24gZ2V0Q2xlYXJBbGwoKSB7ICRjbGVhciA9IE1hZ2U6OmdldFN0b3JlQ29uZmlnKCdnb21hZ2VfbmF2aWdhdGlvbi9maWx0ZXIvY2xlYXJfYnRuX3R4dCcpOyBpZiAoICRjbGVhciA9PSAnJyApIHsgJGNsZWFyID0gJHRoaXMtPl9fKCdDbGVhciBBbGwnKTsgfSByZXR1cm4gJGNsZWFyOyB9IHB1YmxpYyBmdW5jdGlvbiBnZXRNb3JlKCkgeyAkbW9yZSA9IE1hZ2U6OmdldFN0b3JlQ29uZmlnKCdnb21hZ2VfbmF2aWdhdGlvbi9maWx0ZXIvbW9yZV9idG5fdHh0Jyk7IGlmICggJG1vcmUgPT0gJycgKSB7ICRtb3JlID0gJHRoaXMtPl9fKCdNb3JlJyk7IH0gcmV0dXJuICRtb3JlOyB9IHB1YmxpYyBmdW5jdGlvbiBnZXRMZXNzKCkgeyAkbGVzcyA9IE1hZ2U6OmdldFN0b3JlQ29uZmlnKCdnb21hZ2VfbmF2aWdhdGlvbi9maWx0ZXIvbGVzc19idG5fdHh0Jyk7IGlmICggJGxlc3MgPT0gJycgKSB7ICRsZXNzID0gJHRoaXMtPl9fKCdMZXNzJyk7IH0gcmV0dXJuICRsZXNzOyB9IHB1YmxpYyBmdW5jdGlvbiBnZXRTaG93bW9yZSgpIHsgJHNob3dtb3JlID0gTWFnZTo6Z2V0U3RvcmVDb25maWcoJ2dvbWFnZV9uYXZpZ2F0aW9uL2ZpbHRlci9zaG93bW9yZV9idG5fdHh0Jyk7IGlmICggJHNob3dtb3JlID09ICcnICkgeyAkc2hvd21vcmUgPSAkdGhpcy0+X18oJ1Nob3cgbW9yZSBwcm9kdWN0cycpOyB9IHJldHVybiAkc2hvd21vcmU7IH0gcHVibGljIGZ1bmN0aW9uIGdldEJhY2t0b3RvcCgpIHsgJGJhY2t0b3RvcCA9IE1hZ2U6OmdldFN0b3JlQ29uZmlnKCdnb21hZ2VfbmF2aWdhdGlvbi9maWx0ZXIvYmFja3RvdG9wX2J0bl90eHQnKTsgaWYgKCAkYmFja3RvdG9wID09ICcnICkgeyAkYmFja3RvdG9wID0gJHRoaXMtPl9fKCdCYWNrIHRvIFRvcCcpOyB9IHJldHVybiAkYmFja3RvdG9wOyB9IHB1YmxpYyBmdW5jdGlvbiBpc0VudGVycHJpc2UoKSB7IGlmICggTWFnZTo6Z2V0Q29uZmlnICgpLT5nZXRNb2R1bGVDb25maWcgKCAnRW50ZXJwcmlzZV9FbnRlcnByaXNlJyApICYmIE1hZ2U6OmdldENvbmZpZyAoKS0+Z2V0TW9kdWxlQ29uZmlnICggJ0VudGVycHJpc2VfQWRtaW5Hd3MnICkgJiYgTWFnZTo6Z2V0Q29uZmlnICgpLT5nZXRNb2R1bGVDb25maWcgKCAnRW50ZXJwcmlzZV9DaGVja291dCcgKSAmJiBNYWdlOjpnZXRDb25maWcgKCktPmdldE1vZHVsZUNvbmZpZyAoICdFbnRlcnByaXNlX0N1c3RvbWVyJyApICkgeyByZXR1cm4gdHJ1ZTsgfSByZXR1cm4gZmFsc2U7IH0gcHVibGljIGZ1bmN0aW9uIGdldFNpZGUoJHR5cGUpIHsgc3dpdGNoICgkdHlwZSl7IGNhc2UgR29NYWdlX05hdmlnYXRpb25fTW9kZWxfQWRtaW5odG1sX1N5c3RlbV9Db25maWdfU291cmNlX0ZpbHRlcl9BdHRyaWJ1dGVsb2NhdGlvbjo6TEVGVF9CTE9DSzogcmV0dXJuICdsZWZ0JzsgYnJlYWs7IGNhc2UgR29NYWdlX05hdmlnYXRpb25fTW9kZWxfQWRtaW5odG1sX1N5c3RlbV9Db25maWdfU291cmNlX0ZpbHRlcl9BdHRyaWJ1dGVsb2NhdGlvbjo6Q09OVEVOVDogcmV0dXJuICdjb250ZW50JzsgYnJlYWs7IGNhc2UgR29NYWdlX05hdmlnYXRpb25fTW9kZWxfQWRtaW5odG1sX1N5c3RlbV9Db25maWdfU291cmNlX0ZpbHRlcl9BdHRyaWJ1dGVsb2NhdGlvbjo6UklHSFRfQkxPQ0s6IHJldHVybiAncmlnaHQnOyBicmVhazsgZGVmYXVsdDogcmV0dXJuICdsZWZ0JzsgYnJlYWs7IH0gfSBwdWJsaWMgZnVuY3Rpb24gZ2V0Q2xlYXJMaW5rVXJsKCRfZmlsdGVyKXsgaWYgKCAkX2ZpbHRlci0+Z2V0TmFtZSgpID09ICdQcmljZScgfHwgJF9maWx0ZXItPmdldE5hbWUoKSA9PSAnU3BlY2lhbCBQcmljZScpIHsgaWYgKCAkX2ZpbHRlci0+Z2V0TmFtZSgpID09ICdQcmljZScgKSB7ICRjb2RlID0gJ3ByaWNlJzsgfSBlbHNlIHsgJGNvZGUgPSAnc3BlY2lhbF9wcmljZSc7IH0gJGF0dHJpYnV0ZUlkID0gTWFnZTo6Z2V0UmVzb3VyY2VNb2RlbCgnZWF2L2VudGl0eV9hdHRyaWJ1dGUnKS0+Z2V0SWRCeUNvZGUoJ2NhdGFsb2dfcHJvZHVjdCcsJGNvZGUpOyAkYXR0cmlidXRlID0gTWFnZTo6Z2V0TW9kZWwoJ2NhdGFsb2cvcmVzb3VyY2VfZWF2X2F0dHJpYnV0ZScpLT5sb2FkKCRhdHRyaWJ1dGVJZCk7IGlmICggaW5fYXJyYXkoJGF0dHJpYnV0ZS0+Z2V0RmlsdGVyVHlwZSgpLCBhcnJheSggR29NYWdlX05hdmlnYXRpb25fTW9kZWxfTGF5ZXI6OkZJTFRFUl9UWVBFX1NMSURFUiwgR29NYWdlX05hdmlnYXRpb25fTW9kZWxfTGF5ZXI6OkZJTFRFUl9UWVBFX1NMSURFUl9JTlBVVCwgR29NYWdlX05hdmlnYXRpb25fTW9kZWxfTGF5ZXI6OkZJTFRFUl9UWVBFX0lOUFVUX1NMSURFUikpIHx8ICgkYXR0cmlidXRlLT5nZXRGaWx0ZXJUeXBlKCkgPT0gR29NYWdlX05hdmlnYXRpb25fTW9kZWxfTGF5ZXI6OkZJTFRFUl9UWVBFX0RFRkFVTFQgJiYgJGF0dHJpYnV0ZS0+Z2V0UmFuZ2VPcHRpb25zKCkgIT0gR29NYWdlX05hdmlnYXRpb25fTW9kZWxfQWRtaW5odG1sX1N5c3RlbV9Db25maWdfU291cmNlX0ZpbHRlcl9PcHRpb25zcmFuZ2U6Ok5PKSkgeyAkcGFyYW1zID0gYXJyYXkoKTsgJHBhcmFtc1snX25vc2lkJ10gPSB0cnVlOyAkcGFyYW1zWydfY3VycmVudCddID0gdHJ1ZTsgJHBhcmFtc1snX3VzZV9yZXdyaXRlJ10gPSB0cnVlOyAkcGFyYW1zWydfZXNjYXBlJ10gPSBmYWxzZTsgJHVybCA9IE1hZ2U6OmhlbHBlcignZ29tYWdlX25hdmlnYXRpb24nKS0+Z2V0RmlsdGVyVXJsKCcqLyovKicsICRwYXJhbXMpOyAkY2xlYW5fdXJsID0gTWFnZTo6aGVscGVyKCdnb21hZ2VfbmF2aWdhdGlvbicpLT5nZXRGaWx0ZXJVcmwoJyovKi8qJywgYXJyYXkoJ19jdXJyZW50Jz0+dHJ1ZSwgJ19ub3NpZCc9PnRydWUsICdfdXNlX3Jld3JpdGUnPT50cnVlLCAnX3F1ZXJ5Jz0+YXJyYXkoKSwgJ19lc2NhcGUnPT5mYWxzZSkpOyBpZiAoIHN0cnBvcygkY2xlYW5fdXJsLCAiPyIpICE9PSBmYWxzZSApIHsgJGNsZWFuX3VybCA9IHN1YnN0cigkY2xlYW5fdXJsLCAwLCBzdHJwb3MoJGNsZWFuX3VybCwgJz8nKSk7IH0gJHBhcmFtcyA9IHN0cl9yZXBsYWNlKCRjbGVhbl91cmwsICIiLCAkdXJsKTsgJHBhcmFtcyA9IHN0cl9yZXBsYWNlKCI/IiwgIiIsICRwYXJhbXMpOyAkcGFyQXJyYXkgPSBleHBsb2RlKCImIiwgJHBhcmFtcyk7ICRuZXdQYXJBcnJheSA9IGFycmF5KCk7IGZvcmVhY2goICRwYXJBcnJheSBhcyAkcGFyICkgeyAkZXhwYXIgPSBleHBsb2RlKCI9IiwgJHBhcik7IGlmICggJGV4cGFyWzBdICE9ICRjb2RlIC4gJ19mcm9tJyAmJiAkZXhwYXJbMF0gIT0gJGNvZGUgLiAnX3RvJyApIHsgJG5ld1BhckFycmF5W10gPSAkcGFyOyB9IH0gaWYgKCAkbmV3UGFyQXJyYXkgKSB7IGlmICggJF9maWx0ZXItPmdldEFqYXhFbmFibGVkKCkgKSB7IHJldHVybiAkY2xlYW5fdXJsIC4gJz8nIC4gaW1wbG9kZSgiJiIsICRuZXdQYXJBcnJheSkgLiAnJmFqYXg9MSc7IH0gZWxzZSB7IHJldHVybiAkY2xlYW5fdXJsIC4gJz8nIC4gaW1wbG9kZSgiJiIsICRuZXdQYXJBcnJheSk7IH0gfSBlbHNlIHsgaWYgKCAkX2ZpbHRlci0+Z2V0QWpheEVuYWJsZWQoKSApIHsgcmV0dXJuICRjbGVhbl91cmwgLiAnP2FqYXg9MSc7IH0gZWxzZSB7IHJldHVybiAkY2xlYW5fdXJsOyB9IH0gfSBlbHNlIHsgcmV0dXJuICRfZmlsdGVyLT5nZXRDbGVhckxpbmtVcmwoKTsgfSB9IGVsc2UgeyByZXR1cm4gJF9maWx0ZXItPmdldENsZWFyTGlua1VybCgpOyB9IH0gcHVibGljIGZ1bmN0aW9uIG5vdGlmeSgpeyAkZnJlcXVlbmN5ID0gaW50dmFsKE1hZ2U6OmFwcCgpLT5sb2FkQ2FjaGUoJ2dvbWFnZV9ub3RpZmljYXRpb25zX2ZyZXF1ZW5jeScpKTsgaWYgKCEkZnJlcXVlbmN5KXsgJGZyZXF1ZW5jeSA9IDI0OyB9ICRsYXN0X3VwZGF0ZSA9IGludHZhbChNYWdlOjphcHAoKS0+bG9hZENhY2hlKCdnb21hZ2Vfbm90aWZpY2F0aW9uc19sYXN0X3VwZGF0ZScpKTsgaWYgKCgkZnJlcXVlbmN5ICogNjAgKiA2MCArICRsYXN0X3VwZGF0ZSkgPiB0aW1lKCkpIHsgcmV0dXJuIGZhbHNlOyB9ICR0aW1lc3RhbXAgPSAkbGFzdF91cGRhdGU7IGlmICghJHRpbWVzdGFtcCl7ICR0aW1lc3RhbXAgPSB0aW1lKCk7IH0gdHJ5eyAkY2ggPSBjdXJsX2luaXQoKTsgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1VSTCwgc3ByaW50ZignaHR0cHM6Ly93d3cuZ29tYWdlLmNvbS9pbmRleC5waHAvZ29tYWdlX25vdGlmaWNhdGlvbi9pbmRleC9kYXRhJykpOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfUE9TVCwgdHJ1ZSk7IGN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9QT1NURklFTERTLCAnc2t1PWFkdmFuY2VkLW5hdmlnYXRpb24mdGltZXN0YW1wPScuJHRpbWVzdGFtcC4nJnZlcj0nLnVybGVuY29kZSgnNC4xJykpOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfVElNRU9VVCwgMzApOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfUkVUVVJOVFJBTlNGRVIsIHRydWUpOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfU1NMX1ZFUklGWVBFRVIsIDApOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfU1NMX1ZFUklGWUhPU1QsIDApOyAkY29udGVudCA9IGN1cmxfZXhlYygkY2gpOyAkcmVzdWx0ID0gWmVuZF9Kc29uOjpkZWNvZGUoJGNvbnRlbnQpOyBpZiAoJHJlc3VsdCAmJiBpc3NldCgkcmVzdWx0WydmcmVxdWVuY3knXSkgJiYgKCRyZXN1bHRbJ2ZyZXF1ZW5jeSddICE9ICRmcmVxdWVuY3kpKXsgTWFnZTo6YXBwKCktPnNhdmVDYWNoZSgkcmVzdWx0WydmcmVxdWVuY3knXSwgJ2dvbWFnZV9ub3RpZmljYXRpb25zX2ZyZXF1ZW5jeScpOyB9IGlmICgkcmVzdWx0ICYmIGlzc2V0KCRyZXN1bHRbJ2RhdGEnXSkpeyBpZiAoIWVtcHR5KCRyZXN1bHRbJ2RhdGEnXSkpeyBNYWdlOjpnZXRNb2RlbCgnYWRtaW5ub3RpZmljYXRpb24vaW5ib3gnKS0+cGFyc2UoJHJlc3VsdFsnZGF0YSddKTsgfSB9IH0gY2F0Y2ggKEV4Y2VwdGlvbiAkZSl7fSBNYWdlOjphcHAoKS0+c2F2ZUNhY2hlKHRpbWUoKSwgJ2dvbWFnZV9ub3RpZmljYXRpb25zX2xhc3RfdXBkYXRlJyk7IH0gcHVibGljIGZ1bmN0aW9uIGdldElzQW55bW9yZVZlcnNpb24oJG1ham9yLCAkbWlub3IsICRyZXZpc2lvbiA9IDApIHsgJHZlcnNpb25faW5mbyA9IE1hZ2U6OmdldFZlcnNpb24oKTsgJHZlcnNpb25faW5mbyA9IGV4cGxvZGUoJy4nLCAkdmVyc2lvbl9pbmZvKTsgaWYgKCR2ZXJzaW9uX2luZm9bMF0gPiAkbWFqb3IpIHsgcmV0dXJuIHRydWU7IH0gZWxzZWlmICgkdmVyc2lvbl9pbmZvWzBdID09ICRtYWpvcikgeyBpZiAoJHZlcnNpb25faW5mb1sxXSA+ICRtaW5vcikgeyByZXR1cm4gdHJ1ZTsgfSBlbHNlaWYgKCR2ZXJzaW9uX2luZm9bMV0gPT0gJG1pbm9yKSB7IGlmICgkdmVyc2lvbl9pbmZvWzJdID49ICRyZXZpc2lvbikgeyByZXR1cm4gdHJ1ZTsgfSBlbHNlIHsgcmV0dXJuIGZhbHNlOyB9IH0gZWxzZSB7IHJldHVybiBmYWxzZTsgfSB9IGVsc2UgeyByZXR1cm4gZmFsc2U7IH0gfSB9"));