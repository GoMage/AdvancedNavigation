<?php eval(base64_decode("LyoqICogR29NYWdlIEFkdmFuY2VkIE5hdmlnYXRpb24gRXh0ZW5zaW9uICogKiBAY2F0ZWdvcnkgRXh0ZW5zaW9uICogQGNvcHlyaWdodCBDb3B5cmlnaHQgKGMpIDIwMTAtMjAxNSBHb01hZ2UgKGh0dHA6Ly93d3cuZ29tYWdlLmNvbSkgKiBAYXV0aG9yIEdvTWFnZSAqIEBsaWNlbnNlIGh0dHA6Ly93d3cuZ29tYWdlLmNvbS9saWNlbnNlLWFncmVlbWVudC8gU2luZ2xlIGRvbWFpbiBsaWNlbnNlICogQHRlcm1zIG9mIHVzZSBodHRwOi8vd3d3LmdvbWFnZS5jb20vdGVybXMtb2YtdXNlICogQHZlcnNpb24gUmVsZWFzZTogNC43ICogQHNpbmNlIENsYXNzIGF2YWlsYWJsZSBzaW5jZSBSZWxlYXNlIDEuMCAqLyByZXF1aXJlX29uY2UoTWFnZTo6Z2V0QmFzZURpcignbGliJykgLiBEUyAuICdHb01hZ2UnIC4gRFMgLiAnTW9iaWxlRGV0ZWN0JyAuIERTIC4gJ05hdmlnYXRpb25fTW9iaWxlX0RldGVjdC5waHAnKTsgY2xhc3MgR29NYWdlX05hdmlnYXRpb25fSGVscGVyX0RhdGEgZXh0ZW5kcyBNYWdlX0NvcmVfSGVscGVyX0Fic3RyYWN0IHsgcHJvdGVjdGVkICRwcm9kdWN0X2F0dHJpYnV0ZXMgPSBhcnJheSgpOyBwdWJsaWMgZnVuY3Rpb24gZ2V0Q29uZmlnRGF0YSgkbm9kZSkgeyByZXR1cm4gTWFnZTo6Z2V0U3RvcmVDb25maWcoJ2dvbWFnZV9uYXZpZ2F0aW9uLycgLiAkbm9kZSk7IH0gcHVibGljIGZ1bmN0aW9uIGdldEFsbFN0b3JlRG9tYWlucygpIHsgJGRvbWFpbnMgPSBhcnJheSgpOyBmb3JlYWNoIChNYWdlOjphcHAoKS0+Z2V0V2Vic2l0ZXMoKSBhcyAkd2Vic2l0ZSkgeyAkdXJsID0gJHdlYnNpdGUtPmdldENvbmZpZygnd2ViL3Vuc2VjdXJlL2Jhc2VfdXJsJyk7IGlmICgkZG9tYWluID0gdHJpbShwcmVnX3JlcGxhY2UoJy9eLio/XFwvXFwvKC4qKT9cXC8vJywgJyQxJywgJHVybCkpKSB7ICRkb21haW5zW10gPSAkZG9tYWluOyB9ICR1cmwgPSAkd2Vic2l0ZS0+Z2V0Q29uZmlnKCd3ZWIvc2VjdXJlL2Jhc2VfdXJsJyk7IGlmICgkZG9tYWluID0gdHJpbShwcmVnX3JlcGxhY2UoJy9eLio/XFwvXFwvKC4qKT9cXC8vJywgJyQxJywgJHVybCkpKSB7ICRkb21haW5zW10gPSAkZG9tYWluOyB9IH0gcmV0dXJuIGFycmF5X3VuaXF1ZSgkZG9tYWlucyk7IH0gcHVibGljIGZ1bmN0aW9uIGdldEF2YWlsYWJlbFdlYnNpdGVzKCkgeyByZXR1cm4gJHRoaXMtPl93KCk7IH0gcHVibGljIGZ1bmN0aW9uIGdldEF2YWlsYXZlbFdlYnNpdGVzKCkgeyByZXR1cm4gJHRoaXMtPl93KCk7IH0gcHJvdGVjdGVkIGZ1bmN0aW9uIF93KCkgeyBpZiAoIU1hZ2U6OmdldFN0b3JlQ29uZmlnKCdnb21hZ2VfYWN0aXZhdGlvbi9hZHZhbmNlZG5hdmlnYXRpb24vaW5zdGFsbGVkJykgfHwgKGludHZhbChNYWdlOjpnZXRTdG9yZUNvbmZpZygnZ29tYWdlX2FjdGl2YXRpb24vYWR2YW5jZWRuYXZpZ2F0aW9uL2NvdW50JykpID4gMTApICkgeyByZXR1cm4gYXJyYXkoKTsgfSAkdGltZV90b191cGRhdGUgPSA2MCAqIDYwICogMjQgKiAxNTsgJHIgPSBNYWdlOjpnZXRTdG9yZUNvbmZpZygnZ29tYWdlX2FjdGl2YXRpb24vYWR2YW5jZWRuYXZpZ2F0aW9uL2FyJyk7ICR0ID0gTWFnZTo6Z2V0U3RvcmVDb25maWcoJ2dvbWFnZV9hY3RpdmF0aW9uL2FkdmFuY2VkbmF2aWdhdGlvbi90aW1lJyk7ICRzID0gTWFnZTo6Z2V0U3RvcmVDb25maWcoJ2dvbWFnZV9hY3RpdmF0aW9uL2FkdmFuY2VkbmF2aWdhdGlvbi93ZWJzaXRlcycpOyAkbGFzdF9jaGVjayA9IHN0cl9yZXBsYWNlKCRyLCAnJywgTWFnZTo6aGVscGVyKCdjb3JlJyktPmRlY3J5cHQoJHQpKTsgJGFsbHNpdGVzID0gZXhwbG9kZSgnLCcsIHN0cl9yZXBsYWNlKCRyLCAnJywgTWFnZTo6aGVscGVyKCdjb3JlJyktPmRlY3J5cHQoJHMpKSk7ICRhbGxzaXRlcyA9IGFycmF5X2RpZmYoJGFsbHNpdGVzLCBhcnJheSgiIikpOyBpZiAoKCRsYXN0X2NoZWNrICsgJHRpbWVfdG9fdXBkYXRlKSA8IHRpbWUoKSkgeyAkdGhpcy0+YShNYWdlOjpnZXRTdG9yZUNvbmZpZygnZ29tYWdlX2FjdGl2YXRpb24vYWR2YW5jZWRuYXZpZ2F0aW9uL2tleScpLCBpbnR2YWwoTWFnZTo6Z2V0U3RvcmVDb25maWcoJ2dvbWFnZV9hY3RpdmF0aW9uL2FkdmFuY2VkbmF2aWdhdGlvbi9jb3VudCcpKSwgaW1wbG9kZSgnLCcsICRhbGxzaXRlcykgKTsgfSByZXR1cm4gJGFsbHNpdGVzOyB9IHB1YmxpYyBmdW5jdGlvbiBhKCRrLCAkYyA9IDAsICRzID0gJycpIHsgJGNoID0gY3VybF9pbml0KCk7IGN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9VUkwsIHNwcmludGYoJ2h0dHBzOi8vd3d3LmdvbWFnZS5jb20vaW5kZXgucGhwL2dvbWFnZV9kb3dubG9hZGFibGUva2V5L2NoZWNrJykpOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfUE9TVCwgdHJ1ZSk7IGN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9QT1NURklFTERTLCAna2V5PScgLiB1cmxlbmNvZGUoJGspIC4gJyZza3U9YWR2YW5jZWQtbmF2aWdhdGlvbiZkb21haW5zPScgLiB1cmxlbmNvZGUoaW1wbG9kZSgnLCcsICR0aGlzLT5nZXRBbGxTdG9yZURvbWFpbnMoKSkpIC4gJyZ2ZXI9JyAuIHVybGVuY29kZSgnNC43JykpOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfVElNRU9VVCwgMzApOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfUkVUVVJOVFJBTlNGRVIsIHRydWUpOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfU1NMX1ZFUklGWVBFRVIsIDApOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfU1NMX1ZFUklGWUhPU1QsIDApOyAkY29udGVudCA9IGN1cmxfZXhlYygkY2gpOyAkciA9IFplbmRfSnNvbjo6ZGVjb2RlKCRjb250ZW50KTsgJGUgPSBNYWdlOjpoZWxwZXIoJ2NvcmUnKTsgaWYgKGVtcHR5KCRyKSkgeyAkdmFsdWUxID0gTWFnZTo6Z2V0U3RvcmVDb25maWcoJ2dvbWFnZV9hY3RpdmF0aW9uL2FkdmFuY2VkbmF2aWdhdGlvbi9hcicpOyAkZ3JvdXBzID0gYXJyYXkoICdhZHZhbmNlZG5hdmlnYXRpb24nID0+IGFycmF5KCAnZmllbGRzJyA9PiBhcnJheSggJ2FyJyA9PiBhcnJheSggJ3ZhbHVlJyA9PiAkdmFsdWUxICksICd3ZWJzaXRlcycgPT4gYXJyYXkoICd2YWx1ZScgPT4gKHN0cmluZylNYWdlOjpnZXRTdG9yZUNvbmZpZygnZ29tYWdlX2FjdGl2YXRpb24vYWR2YW5jZWRuYXZpZ2F0aW9uL3dlYnNpdGVzJykgKSwgJ3RpbWUnID0+IGFycmF5KCAndmFsdWUnID0+IChzdHJpbmcpJGUtPmVuY3J5cHQoJHZhbHVlMSAuICh0aW1lKCkgLSAoNjAgKiA2MCAqIDI0ICogMTUgLSAxODAwKSkgLiAkdmFsdWUxKSApLCAnY291bnQnID0+IGFycmF5KCAndmFsdWUnID0+ICRjICsgMSkgKSApICk7IE1hZ2U6OmdldE1vZGVsKCdhZG1pbmh0bWwvY29uZmlnX2RhdGEnKSAtPnNldFNlY3Rpb24oJ2dvbWFnZV9hY3RpdmF0aW9uJykgLT5zZXRHcm91cHMoJGdyb3VwcykgLT5zYXZlKCk7IE1hZ2U6OmdldENvbmZpZygpLT5yZWluaXQoKTsgTWFnZTo6YXBwKCktPnJlaW5pdFN0b3JlcygpOyByZXR1cm47IH0gJHZhbHVlMSA9ICcnOyAkdmFsdWUyID0gJyc7IGlmIChpc3NldCgkclsnZCddKSAmJiBpc3NldCgkclsnYyddKSkgeyAkdmFsdWUxID0gJGUtPmVuY3J5cHQoYmFzZTY0X2VuY29kZShaZW5kX0pzb246OmVuY29kZSgkcikpKTsgaWYgKCEkcykgeyAkcyA9IE1hZ2U6OmdldFN0b3JlQ29uZmlnKCdnb21hZ2VfYWN0aXZhdGlvbi9hZHZhbmNlZG5hdmlnYXRpb24vd2Vic2l0ZXMnKTsgfSAkcyA9IGFycmF5X3NsaWNlKGV4cGxvZGUoJywnLCAkcyksIDAsICRyWydjJ10pOyAkdmFsdWUyID0gJGUtPmVuY3J5cHQoJHZhbHVlMSAuIGltcGxvZGUoJywnLCAkcykgLiAkdmFsdWUxKTsgfSAkZ3JvdXBzID0gYXJyYXkoICdhZHZhbmNlZG5hdmlnYXRpb24nID0+IGFycmF5KCAnZmllbGRzJyA9PiBhcnJheSggJ2FyJyA9PiBhcnJheSggJ3ZhbHVlJyA9PiAkdmFsdWUxICksICd3ZWJzaXRlcycgPT4gYXJyYXkoICd2YWx1ZScgPT4gKHN0cmluZykkdmFsdWUyICksICd0aW1lJyA9PiBhcnJheSggJ3ZhbHVlJyA9PiAoc3RyaW5nKSRlLT5lbmNyeXB0KCR2YWx1ZTEgLiB0aW1lKCkgLiAkdmFsdWUxKSApLCAnaW5zdGFsbGVkJyA9PiBhcnJheSggJ3ZhbHVlJyA9PiAxICksICdjb3VudCcgPT4gYXJyYXkoICd2YWx1ZScgPT4gMCkgKSApICk7IE1hZ2U6OmdldE1vZGVsKCdhZG1pbmh0bWwvY29uZmlnX2RhdGEnKSAtPnNldFNlY3Rpb24oJ2dvbWFnZV9hY3RpdmF0aW9uJykgLT5zZXRHcm91cHMoJGdyb3VwcykgLT5zYXZlKCk7IE1hZ2U6OmdldENvbmZpZygpLT5yZWluaXQoKTsgTWFnZTo6YXBwKCktPnJlaW5pdFN0b3JlcygpOyB9IHB1YmxpYyBmdW5jdGlvbiBnYSgpIHsgcmV0dXJuIFplbmRfSnNvbjo6ZGVjb2RlKGJhc2U2NF9kZWNvZGUoTWFnZTo6aGVscGVyKCdjb3JlJyktPmRlY3J5cHQoTWFnZTo6Z2V0U3RvcmVDb25maWcoJ2dvbWFnZV9hY3RpdmF0aW9uL2FkdmFuY2VkbmF2aWdhdGlvbi9hcicpKSkpOyB9IHB1YmxpYyBmdW5jdGlvbiBpc0dvbWFnZU5hdmlnYXRpb24oKSB7IGlmICgkdGhpcy0+aXNNb2JpbGVEZXZpY2UoKSAmJiBNYWdlOjpnZXRTdG9yZUNvbmZpZ0ZsYWcoJ2dvbWFnZV9uYXZpZ2F0aW9uL2dlbmVyYWwvZGlzYWJsZV9tb2JpbGUnKSkgeyByZXR1cm4gZmFsc2U7IH0gcmV0dXJuIGluX2FycmF5KE1hZ2U6OmFwcCgpLT5nZXRTdG9yZSgpLT5nZXRXZWJzaXRlSWQoKSwgJHRoaXMtPmdldEF2YWlsYXZlbFdlYnNpdGVzKCkpICYmIE1hZ2U6OmdldFN0b3JlQ29uZmlnRmxhZygnZ29tYWdlX25hdmlnYXRpb24vZ2VuZXJhbC9tb2RlJyk7IH0gcHVibGljIGZ1bmN0aW9uIGlzR29tYWdlTmF2aWdhdGlvbk1lbnUoKSB7IHJldHVybiBpbl9hcnJheShNYWdlOjphcHAoKS0+Z2V0U3RvcmUoKS0+Z2V0V2Vic2l0ZUlkKCksICR0aGlzLT5nZXRBdmFpbGF2ZWxXZWJzaXRlcygpKSAmJiBNYWdlOjpnZXRTdG9yZUNvbmZpZ0ZsYWcoJ2dvbWFnZV9uYXZpZ2F0aW9uL21lbnViYXJzZXR0aW5ncy9uYXZpZ2F0aW9uJyk7IH0gcHVibGljIGZ1bmN0aW9uIGlzR29tYWdlTmF2aWdhdGlvbkFqYXgoKSB7IHJldHVybiAkdGhpcy0+aXNHb21hZ2VOYXZpZ2F0aW9uKCkgJiYgTWFnZTo6Z2V0U3RvcmVDb25maWdGbGFnKCdnb21hZ2VfbmF2aWdhdGlvbi9nZW5lcmFsL3BhZ2VyJykgJiYgKE1hZ2U6OnJlZ2lzdHJ5KCdjdXJyZW50X2NhdGVnb3J5JykgfHwgKE1hZ2U6OmFwcCgpLT5nZXRGcm9udENvbnRyb2xsZXIoKS0+Z2V0UmVxdWVzdCgpLT5nZXRSb3V0ZU5hbWUoKSA9PSAnY2F0YWxvZ3NlYXJjaCcgJiYgTWFnZTo6YXBwKCktPmdldEZyb250Q29udHJvbGxlcigpLT5nZXRSZXF1ZXN0KCktPmdldENvbnRyb2xsZXJOYW1lKCkgIT0gJ2FkdmFuY2VkJykpOyB9IHB1YmxpYyBmdW5jdGlvbiBpc0dvbWFnZU5hdmlnYXRpb25DbGVhckFqYXgoKSB7IHJldHVybiAkdGhpcy0+aXNHb21hZ2VOYXZpZ2F0aW9uKCkgJiYgKE1hZ2U6OnJlZ2lzdHJ5KCdjdXJyZW50X2NhdGVnb3J5JykgfHwgKE1hZ2U6OmFwcCgpLT5nZXRGcm9udENvbnRyb2xsZXIoKS0+Z2V0UmVxdWVzdCgpLT5nZXRSb3V0ZU5hbWUoKSA9PSAnY2F0YWxvZ3NlYXJjaCcgJiYgTWFnZTo6YXBwKCktPmdldEZyb250Q29udHJvbGxlcigpLT5nZXRSZXF1ZXN0KCktPmdldENvbnRyb2xsZXJOYW1lKCkgIT0gJ2FkdmFuY2VkJykpOyB9IHB1YmxpYyBmdW5jdGlvbiBmb3JtYXRDb2xvcigkdmFsdWUpIHsgaWYgKCR2YWx1ZSA9IHByZWdfcmVwbGFjZSgnL1teYS16QS1aMC05XHNdLycsICcnLCAkdmFsdWUpKSB7ICR2YWx1ZSA9ICcjJyAuICR2YWx1ZTsgfSByZXR1cm4gJHZhbHVlOyB9IHB1YmxpYyBmdW5jdGlvbiBpc0ZyZW5kbHlVcmwoKSB7IHJldHVybiAkdGhpcy0+aXNHb21hZ2VOYXZpZ2F0aW9uKCkgJiYgTWFnZTo6Z2V0U3RvcmVDb25maWdGbGFnKCdnb21hZ2VfbmF2aWdhdGlvbi9maWx0ZXJfc2V0dGluZ3MvZnJlbmRseXVybCcpICYmICEkdGhpcy0+aXNHb01hZ2VTZW9Cb29zdGVyRW5hYmxlZCgpOyB9IHB1YmxpYyBmdW5jdGlvbiBpc0dvTWFnZVNlb0Jvb3N0ZXJFbmFibGVkKCkgeyAkX21vZHVsZXMgPSBNYWdlOjpnZXRDb25maWcoKS0+Z2V0Tm9kZSgnbW9kdWxlcycpLT5jaGlsZHJlbigpOyAkX21vZHVsZXNBcnJheSA9IChhcnJheSkkX21vZHVsZXM7IGlmICghaXNzZXQoJF9tb2R1bGVzQXJyYXlbJ0dvTWFnZV9TZW9Cb29zdGVyJ10pKSB7IHJldHVybiBmYWxzZTsgfSByZXR1cm4gJF9tb2R1bGVzQXJyYXlbJ0dvTWFnZV9TZW9Cb29zdGVyJ10tPmlzKCdhY3RpdmUnKTsgfSBwdWJsaWMgZnVuY3Rpb24gZ2V0UmVxdWVzdCgpIHsgJHJlcXVlc3QgPSBNYWdlOjphcHAoKS0+Z2V0RnJvbnRDb250cm9sbGVyKCktPmdldFJlcXVlc3QoKTsgaWYgKCR0aGlzLT5pc0dvTWFnZVNlb0Jvb3N0ZXJFbmFibGVkKCkpIHsgJGhlbHBlciA9IE1hZ2U6OmhlbHBlcignZ29tYWdlX3Nlb2Jvb3N0ZXIvbGF5ZXJlZCcpOyAkcmVxdWVzdCA9ICRoZWxwZXItPmdldFNlcGFyYXRvcigpIHx8ICRoZWxwZXItPmNhbkFkZFJld3JpdGVQYXRoKCkgPyAkaGVscGVyLT5nZXRSZXF1ZXN0KCkgOiAkcmVxdWVzdDsgfSByZXR1cm4gJHJlcXVlc3Q7IH0gcHVibGljIGZ1bmN0aW9uIGdldEZpbHRlclVybCgkcm91dGUgPSAnKi8qLyonLCAkcGFyYW1zID0gYXJyYXkoKSkgeyBpZiAoISR0aGlzLT5pc0ZyZW5kbHlVcmwoKSkgeyAkcGFyYW1zWydfcXVlcnknXVsnYWpheCddID0gbnVsbDsgcmV0dXJuIE1hZ2U6OmhlbHBlcignZ29tYWdlX25hdmlnYXRpb24vdXJsJyktPndyYXBwKE1hZ2U6OmdldFVybCgkcm91dGUsICRwYXJhbXMpKTsgfSAkbW9kZWwgPSBNYWdlOjpnZXRNb2RlbCgnY29yZS91cmwnKTsgJGF0dHIgPSBNYWdlOjpyZWdpc3RyeSgnZ2FuX2ZpbHRlcl9hdHRyaWJ1dGVzJyk7ICRxdWVyeV9wYXJhbXMgPSBpc19hcnJheSgkbW9kZWwtPmdldFJlcXVlc3QoKS0+Z2V0UXVlcnkoKSkgPyAkbW9kZWwtPmdldFJlcXVlc3QoKS0+Z2V0UXVlcnkoKSA6IGFycmF5KCk7ICRxdWVyeSA9IGFycmF5KCk7IGlmIChpc3NldCgkcGFyYW1zWydfcXVlcnknXSkgJiYgaXNfYXJyYXkoJHBhcmFtc1snX3F1ZXJ5J10pKSB7ICRxdWVyeV9wYXJhbXMgPSBhcnJheV9tZXJnZSgkcXVlcnlfcGFyYW1zLCAkcGFyYW1zWydfcXVlcnknXSk7IH0gZm9yZWFjaCAoJHF1ZXJ5X3BhcmFtcyBhcyAkcGFyYW0gPT4gJHZhbHVlKSB7IGlmIChpc19udWxsKCR2YWx1ZSkpIHsgJHF1ZXJ5WyRwYXJhbV0gPSBudWxsOyBjb250aW51ZTsgfSBpZiAoJHBhcmFtID09ICdjYXQnKSB7ICR2YWx1ZXMgPSBleHBsb2RlKCcsJywgJHZhbHVlKTsgJHByZXBhcmVfdmFsdWVzID0gYXJyYXkoKTsgZm9yZWFjaCAoJHZhbHVlcyBhcyAkX3ZhbHVlKSB7ICRjYXRlZ29yeSA9IE1hZ2U6OmdldE1vZGVsKCdjYXRhbG9nL2NhdGVnb3J5JyktPmxvYWQoJF92YWx1ZSk7IGlmICgkY2F0ZWdvcnkgJiYgJGNhdGVnb3J5LT5nZXRJZCgpKSB7IGlmIChNYWdlOjpnZXRTdG9yZUNvbmZpZ0ZsYWcoJ2dvbWFnZV9uYXZpZ2F0aW9uL2ZpbHRlcl9zZXR0aW5ncy9leHBlbmRfZnJlbmRseXVybCcpKSB7ICRwYXJlbnRfaWRzID0gJGNhdGVnb3J5LT5nZXRQYXJlbnRJZHMoKTsgJHBhcmVudF9jYXRlZ29yeSA9IE1hZ2U6OmdldE1vZGVsKCdjYXRhbG9nL2NhdGVnb3J5JyktPmxvYWQoZW5kKCRwYXJlbnRfaWRzKSk7ICRwcmVwYXJlX3ZhbHVlc1tdID0gJHBhcmVudF9jYXRlZ29yeS0+Z2V0RGF0YSgndXJsX2tleScpIC4gJ3wnIC4gJGNhdGVnb3J5LT5nZXREYXRhKCd1cmxfa2V5Jyk7IH0gZWxzZSB7ICRwcmVwYXJlX3ZhbHVlc1tdID0gJGNhdGVnb3J5LT5nZXREYXRhKCd1cmxfa2V5Jyk7IH0gfSB9IGlmICghZW1wdHkoJHByZXBhcmVfdmFsdWVzKSkgeyAkcXVlcnlbJHBhcmFtXSA9IGltcGxvZGUoJywnLCAkcHJlcGFyZV92YWx1ZXMpOyB9IGVsc2UgeyAkcXVlcnlbJHBhcmFtXSA9IG51bGw7IH0gfSBlbHNlaWYgKGlzc2V0KCRhdHRyWyRwYXJhbV0pICYmICFpbl9hcnJheSgkYXR0clskcGFyYW1dWyd0eXBlJ10sIGFycmF5KCdwcmljZScsICdkZWNpbWFsJykpKSB7ICR2YWx1ZXMgPSBleHBsb2RlKCcsJywgJHZhbHVlKTsgJHByZXBhcmVfdmFsdWVzID0gYXJyYXkoKTsgZm9yZWFjaCAoJHZhbHVlcyBhcyAkX3ZhbHVlKSB7IGZvcmVhY2ggKCRhdHRyWyRwYXJhbV1bJ29wdGlvbnMnXSBhcyAkX2sgPT4gJF92KSB7IGlmICgkX3YgPT0gJF92YWx1ZSkgeyAkcHJlcGFyZV92YWx1ZXNbXSA9ICRfazsgYnJlYWs7IH0gfSB9IGlmICghZW1wdHkoJHByZXBhcmVfdmFsdWVzKSkgeyAkcXVlcnlbJHBhcmFtXSA9IGltcGxvZGUoJywnLCAkcHJlcGFyZV92YWx1ZXMpOyB9IGVsc2UgeyAkcXVlcnlbJHBhcmFtXSA9IG51bGw7IH0gfSBlbHNlaWYgKGlzc2V0KCRhdHRyWyRwYXJhbV0pICYmIGluX2FycmF5KCRhdHRyWyRwYXJhbV1bJ3R5cGUnXSwgYXJyYXkoJ3ByaWNlJywgJ2RlY2ltYWwnKSkpIHsgaWYgKGlzX2FycmF5KCR2YWx1ZSkpIHsgaWYgKGlzc2V0KCR2YWx1ZVsnZnJvbSddKSkgeyAkcXVlcnlbJHBhcmFtIC4gJ19mcm9tJ10gPSAkdmFsdWVbJ2Zyb20nXTsgfSBpZiAoaXNzZXQoJHZhbHVlWyd0byddKSkgeyAkcXVlcnlbJHBhcmFtIC4gJ190byddID0gJHZhbHVlWyd0byddOyB9IH0gZWxzZWlmICgoJGF0dHJpYnV0ZSA9ICR0aGlzLT5nZXRQcm9kdWN0QXR0cmlidXRlKCRwYXJhbSkpICYmIGluX2FycmF5KCRhdHRyaWJ1dGUtPmdldFJhbmdlT3B0aW9ucygpLCBhcnJheShHb01hZ2VfTmF2aWdhdGlvbl9Nb2RlbF9BZG1pbmh0bWxfU3lzdGVtX0NvbmZpZ19Tb3VyY2VfRmlsdGVyX09wdGlvbnNyYW5nZTo6TUFOVUFMTFksIEdvTWFnZV9OYXZpZ2F0aW9uX01vZGVsX0FkbWluaHRtbF9TeXN0ZW1fQ29uZmlnX1NvdXJjZV9GaWx0ZXJfT3B0aW9uc3JhbmdlOjpBVVRPKSApICYmICRhdHRyaWJ1dGUtPmdldEZpbHRlclR5cGUoKSA9PSBHb01hZ2VfTmF2aWdhdGlvbl9Nb2RlbF9DYXRhbG9nX0xheWVyOjpGSUxURVJfVFlQRV9ERUZBVUxUICkgeyAkdmFsdWVzID0gZXhwbG9kZSgnLCcsICR2YWx1ZSk7ICRxdWVyeVskcGFyYW0gLiAnX2Zyb20nXSA9ICR2YWx1ZXNbMF07ICRxdWVyeVskcGFyYW0gLiAnX3RvJ10gPSAkdmFsdWVzWzFdOyAkcXVlcnlbJHBhcmFtXSA9IG51bGw7IH0gZWxzZSB7ICRxdWVyeVskcGFyYW1dID0gJHZhbHVlOyB9IH0gZWxzZSB7ICRxdWVyeVskcGFyYW1dID0gJHZhbHVlOyB9IH0gJHBhcmFtc1snX3F1ZXJ5J10gPSAkcXVlcnk7ICRwYXJhbXNbJ19xdWVyeSddWydhamF4J10gPSBudWxsOyByZXR1cm4gTWFnZTo6aGVscGVyKCdnb21hZ2VfbmF2aWdhdGlvbi91cmwnKS0+d3JhcHAoJG1vZGVsLT5nZXRVcmwoJHJvdXRlLCAkcGFyYW1zKSk7IH0gcHVibGljIGZ1bmN0aW9uIGZvcm1hdFVybFZhbHVlKCR2YWx1ZSwgJGRlZmF1bHQpIHsgJG9sZExvY2FsZSA9IHNldGxvY2FsZShMQ19DT0xMQVRFLCAiMCIpOyAkbG9jYWxlQ29kZSA9IE1hZ2U6OmFwcCgpLT5nZXRMb2NhbGUoKS0+Z2V0TG9jYWxlQ29kZSgpOyBzZXRsb2NhbGUoTENfQ09MTEFURSwgJGxvY2FsZUNvZGUgLiAnLlVURjgnLCAnQy5VVEYtOCcsICdlbl9VUy51dGY4Jyk7ICR2YWx1ZSA9IGljb252KG1iX2RldGVjdF9lbmNvZGluZygkdmFsdWUpLCAnQVNDSUkvL1RSQU5TTElUJywgJHZhbHVlKTsgc2V0bG9jYWxlKExDX0NPTExBVEUsICRvbGRMb2NhbGUpOyAkdmFsdWUgPSBzdHJ0b2xvd2VyKCR2YWx1ZSk7ICR2YWx1ZSA9IHByZWdfcmVwbGFjZSgnI1teMC05YS16XSsjaScsICctJywgTWFnZTo6aGVscGVyKCdjYXRhbG9nL3Byb2R1Y3RfdXJsJyktPmZvcm1hdCgkdmFsdWUpKTsgJHZhbHVlID0gdHJpbSgkdmFsdWUsICctJyk7IHJldHVybiAkdmFsdWUgPyAkdmFsdWUgOiAkZGVmYXVsdDsgfSBwdWJsaWMgZnVuY3Rpb24gaXNNb2JpbGVEZXZpY2UoKSB7ICRkZXRlY3QgPSBuZXcgTmF2aWdhdGlvbl9Nb2JpbGVfRGV0ZWN0KCk7IHJldHVybiAkZGV0ZWN0LT5pc01vYmlsZSgpOyB9IHB1YmxpYyBmdW5jdGlvbiBnZXRGaWx0ZXJJdGVtQ291bnQoJGZpbHRlcikgeyAkY291bnQgPSAwOyBpZiAoJGZpbHRlciAmJiAkZmlsdGVyLT5nZXRJdGVtcygpKSB7IGZvcmVhY2ggKCRmaWx0ZXItPmdldEl0ZW1zKCkgYXMgJGl0ZW0pIHsgJGNvdW50ICs9ICRpdGVtLT5nZXRDb3VudCgpOyB9IH0gaWYgKCRjb3VudCA9PSAwICYmICRmaWx0ZXItPmdldEZpbHRlcigpLT5nZXRSZXF1ZXN0VmFyVmFsdWUoKSA9PSAnc3RvY2tfc3RhdHVzJykgeyByZXR1cm4gMTsgfSByZXR1cm4gJGNvdW50OyB9IHB1YmxpYyBmdW5jdGlvbiBnZXRGaWx0ZXIoKSB7ICRmaWx0ZXIgPSBNYWdlOjpnZXRTdG9yZUNvbmZpZygnZ29tYWdlX25hdmlnYXRpb24vZmlsdGVyL2ZpbHRlcl9idG5fdHh0Jyk7IGlmICgkZmlsdGVyID09ICcnKSB7ICRmaWx0ZXIgPSAkdGhpcy0+X18oJ0ZpbHRlcicpOyB9IHJldHVybiAkZmlsdGVyOyB9IHB1YmxpYyBmdW5jdGlvbiBnZXRDbGVhckFsbCgpIHsgJGNsZWFyID0gTWFnZTo6Z2V0U3RvcmVDb25maWcoJ2dvbWFnZV9uYXZpZ2F0aW9uL2ZpbHRlci9jbGVhcl9idG5fdHh0Jyk7IGlmICgkY2xlYXIgPT0gJycpIHsgJGNsZWFyID0gJHRoaXMtPl9fKCdDbGVhciBBbGwnKTsgfSByZXR1cm4gJGNsZWFyOyB9IHB1YmxpYyBmdW5jdGlvbiBnZXRNb3JlKCkgeyAkbW9yZSA9IE1hZ2U6OmdldFN0b3JlQ29uZmlnKCdnb21hZ2VfbmF2aWdhdGlvbi9maWx0ZXIvbW9yZV9idG5fdHh0Jyk7IGlmICgkbW9yZSA9PSAnJykgeyAkbW9yZSA9ICR0aGlzLT5fXygnTW9yZScpOyB9IHJldHVybiAkbW9yZTsgfSBwdWJsaWMgZnVuY3Rpb24gZ2V0TGVzcygpIHsgJGxlc3MgPSBNYWdlOjpnZXRTdG9yZUNvbmZpZygnZ29tYWdlX25hdmlnYXRpb24vZmlsdGVyL2xlc3NfYnRuX3R4dCcpOyBpZiAoJGxlc3MgPT0gJycpIHsgJGxlc3MgPSAkdGhpcy0+X18oJ0xlc3MnKTsgfSByZXR1cm4gJGxlc3M7IH0gcHVibGljIGZ1bmN0aW9uIGdldFNob3dtb3JlKCkgeyAkc2hvd21vcmUgPSBNYWdlOjpnZXRTdG9yZUNvbmZpZygnZ29tYWdlX25hdmlnYXRpb24vZmlsdGVyL3Nob3dtb3JlX2J0bl90eHQnKTsgaWYgKCRzaG93bW9yZSA9PSAnJykgeyAkc2hvd21vcmUgPSAkdGhpcy0+X18oJ1Nob3cgbW9yZSBwcm9kdWN0cycpOyB9IHJldHVybiAkc2hvd21vcmU7IH0gcHVibGljIGZ1bmN0aW9uIGdldEJhY2t0b3RvcCgpIHsgJGJhY2t0b3RvcCA9IE1hZ2U6OmdldFN0b3JlQ29uZmlnKCdnb21hZ2VfbmF2aWdhdGlvbi9maWx0ZXIvYmFja3RvdG9wX2J0bl90eHQnKTsgaWYgKCRiYWNrdG90b3AgPT0gJycpIHsgJGJhY2t0b3RvcCA9ICR0aGlzLT5fXygnQmFjayB0byBUb3AnKTsgfSByZXR1cm4gJGJhY2t0b3RvcDsgfSBwdWJsaWMgZnVuY3Rpb24gaXNFbnRlcnByaXNlKCkgeyBpZiAoTWFnZTo6Z2V0Q29uZmlnKCktPmdldE1vZHVsZUNvbmZpZygnRW50ZXJwcmlzZV9FbnRlcnByaXNlJykgJiYgTWFnZTo6Z2V0Q29uZmlnKCktPmdldE1vZHVsZUNvbmZpZygnRW50ZXJwcmlzZV9BZG1pbkd3cycpICYmIE1hZ2U6OmdldENvbmZpZygpLT5nZXRNb2R1bGVDb25maWcoJ0VudGVycHJpc2VfQ2hlY2tvdXQnKSAmJiBNYWdlOjpnZXRDb25maWcoKS0+Z2V0TW9kdWxlQ29uZmlnKCdFbnRlcnByaXNlX0N1c3RvbWVyJykpIHsgcmV0dXJuIHRydWU7IH0gcmV0dXJuIGZhbHNlOyB9IHB1YmxpYyBmdW5jdGlvbiBnZXRTaWRlKCR0eXBlKSB7IHN3aXRjaCAoJHR5cGUpIHsgY2FzZSBHb01hZ2VfTmF2aWdhdGlvbl9Nb2RlbF9BZG1pbmh0bWxfU3lzdGVtX0NvbmZpZ19Tb3VyY2VfRmlsdGVyX0F0dHJpYnV0ZWxvY2F0aW9uOjpMRUZUX0JMT0NLOiByZXR1cm4gJ2xlZnQnOyBicmVhazsgY2FzZSBHb01hZ2VfTmF2aWdhdGlvbl9Nb2RlbF9BZG1pbmh0bWxfU3lzdGVtX0NvbmZpZ19Tb3VyY2VfRmlsdGVyX0F0dHJpYnV0ZWxvY2F0aW9uOjpDT05URU5UOiByZXR1cm4gJ2NvbnRlbnQnOyBicmVhazsgY2FzZSBHb01hZ2VfTmF2aWdhdGlvbl9Nb2RlbF9BZG1pbmh0bWxfU3lzdGVtX0NvbmZpZ19Tb3VyY2VfRmlsdGVyX0F0dHJpYnV0ZWxvY2F0aW9uOjpSSUdIVF9CTE9DSzogcmV0dXJuICdyaWdodCc7IGJyZWFrOyBkZWZhdWx0OiByZXR1cm4gJ2xlZnQnOyBicmVhazsgfSB9IHB1YmxpYyBmdW5jdGlvbiBub3RpZnkoKSB7ICRmcmVxdWVuY3kgPSBpbnR2YWwoTWFnZTo6YXBwKCktPmxvYWRDYWNoZSgnZ29tYWdlX25vdGlmaWNhdGlvbnNfZnJlcXVlbmN5JykpOyBpZiAoISRmcmVxdWVuY3kpIHsgJGZyZXF1ZW5jeSA9IDI0OyB9ICRsYXN0X3VwZGF0ZSA9IGludHZhbChNYWdlOjphcHAoKS0+bG9hZENhY2hlKCdnb21hZ2Vfbm90aWZpY2F0aW9uc19sYXN0X3VwZGF0ZScpKTsgaWYgKCgkZnJlcXVlbmN5ICogNjAgKiA2MCArICRsYXN0X3VwZGF0ZSkgPiB0aW1lKCkpIHsgcmV0dXJuIGZhbHNlOyB9ICR0aW1lc3RhbXAgPSAkbGFzdF91cGRhdGU7IGlmICghJHRpbWVzdGFtcCkgeyAkdGltZXN0YW1wID0gdGltZSgpOyB9IHRyeSB7ICRjaCA9IGN1cmxfaW5pdCgpOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfVVJMLCBzcHJpbnRmKCdodHRwczovL3d3dy5nb21hZ2UuY29tL2luZGV4LnBocC9nb21hZ2Vfbm90aWZpY2F0aW9uL2luZGV4L2RhdGEnKSk7IGN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9QT1NULCB0cnVlKTsgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1BPU1RGSUVMRFMsICdza3U9YWR2YW5jZWQtbmF2aWdhdGlvbiZ0aW1lc3RhbXA9JyAuICR0aW1lc3RhbXAgLiAnJnZlcj0nIC4gdXJsZW5jb2RlKCc0LjcnKSk7IGN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9USU1FT1VULCAzMCk7IGN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9SRVRVUk5UUkFOU0ZFUiwgdHJ1ZSk7IGN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9TU0xfVkVSSUZZUEVFUiwgMCk7IGN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9TU0xfVkVSSUZZSE9TVCwgMCk7ICRjb250ZW50ID0gY3VybF9leGVjKCRjaCk7ICRyZXN1bHQgPSBaZW5kX0pzb246OmRlY29kZSgkY29udGVudCk7IGlmICgkcmVzdWx0ICYmIGlzc2V0KCRyZXN1bHRbJ2ZyZXF1ZW5jeSddKSAmJiAoJHJlc3VsdFsnZnJlcXVlbmN5J10gIT0gJGZyZXF1ZW5jeSkpIHsgTWFnZTo6YXBwKCktPnNhdmVDYWNoZSgkcmVzdWx0WydmcmVxdWVuY3knXSwgJ2dvbWFnZV9ub3RpZmljYXRpb25zX2ZyZXF1ZW5jeScpOyB9IGlmICgkcmVzdWx0ICYmIGlzc2V0KCRyZXN1bHRbJ2RhdGEnXSkpIHsgaWYgKCFlbXB0eSgkcmVzdWx0WydkYXRhJ10pKSB7IE1hZ2U6OmdldE1vZGVsKCdhZG1pbm5vdGlmaWNhdGlvbi9pbmJveCcpLT5wYXJzZSgkcmVzdWx0WydkYXRhJ10pOyB9IH0gfSBjYXRjaCAoRXhjZXB0aW9uICRlKSB7IH0gTWFnZTo6YXBwKCktPnNhdmVDYWNoZSh0aW1lKCksICdnb21hZ2Vfbm90aWZpY2F0aW9uc19sYXN0X3VwZGF0ZScpOyB9IHB1YmxpYyBmdW5jdGlvbiBnZXRJc0FueW1vcmVWZXJzaW9uKCRtYWpvciwgJG1pbm9yLCAkcmV2aXNpb24gPSAwKSB7ICR2ZXJzaW9uX2luZm8gPSBNYWdlOjpnZXRWZXJzaW9uKCk7ICR2ZXJzaW9uX2luZm8gPSBleHBsb2RlKCcuJywgJHZlcnNpb25faW5mbyk7IGlmICgkdmVyc2lvbl9pbmZvWzBdID4gJG1ham9yKSB7IHJldHVybiB0cnVlOyB9IGVsc2VpZiAoJHZlcnNpb25faW5mb1swXSA9PSAkbWFqb3IpIHsgaWYgKCR2ZXJzaW9uX2luZm9bMV0gPiAkbWlub3IpIHsgcmV0dXJuIHRydWU7IH0gZWxzZWlmICgkdmVyc2lvbl9pbmZvWzFdID09ICRtaW5vcikgeyBpZiAoJHZlcnNpb25faW5mb1syXSA+PSAkcmV2aXNpb24pIHsgcmV0dXJuIHRydWU7IH0gZWxzZSB7IHJldHVybiBmYWxzZTsgfSB9IGVsc2UgeyByZXR1cm4gZmFsc2U7IH0gfSBlbHNlIHsgcmV0dXJuIGZhbHNlOyB9IH0gcHVibGljIGZ1bmN0aW9uIGdldFByb2R1Y3RBdHRyaWJ1dGUoJGNvZGUpIHsgaWYgKCFpc3NldCgkdGhpcy0+cHJvZHVjdF9hdHRyaWJ1dGVzWyRjb2RlXSkpIHsgJGF0dHJpYnV0ZU1vZGVsID0gTWFnZTo6Z2V0TW9kZWwoJ2Vhdi9lbnRpdHlfYXR0cmlidXRlJyktPmxvYWRCeUNvZGUoJ2NhdGFsb2dfcHJvZHVjdCcsICRjb2RlKTsgJGF0dHJpYnV0ZSA9IE1hZ2U6OmdldE1vZGVsKCdjYXRhbG9nL3Jlc291cmNlX2Vhdl9hdHRyaWJ1dGUnKS0+bG9hZCgkYXR0cmlidXRlTW9kZWwtPmdldElkKCkpOyAkdGhpcy0+cHJvZHVjdF9hdHRyaWJ1dGVzWyRjb2RlXSA9ICRhdHRyaWJ1dGU7IH0gcmV0dXJuICR0aGlzLT5wcm9kdWN0X2F0dHJpYnV0ZXNbJGNvZGVdOyB9IH0="));