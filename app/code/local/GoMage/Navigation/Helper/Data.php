<?php eval(base64_decode("LyoqICogR29NYWdlIEFkdmFuY2VkIE5hdmlnYXRpb24gRXh0ZW5zaW9uICogKiBAY2F0ZWdvcnkgRXh0ZW5zaW9uICogQGNvcHlyaWdodCBDb3B5cmlnaHQgKGMpIDIwMTAtMjAxNCBHb01hZ2UgKGh0dHA6Ly93d3cuZ29tYWdlLmNvbSkgKiBAYXV0aG9yIEdvTWFnZSAqIEBsaWNlbnNlIGh0dHA6Ly93d3cuZ29tYWdlLmNvbS9saWNlbnNlLWFncmVlbWVudC8gU2luZ2xlIGRvbWFpbiBsaWNlbnNlICogQHRlcm1zIG9mIHVzZSBodHRwOi8vd3d3LmdvbWFnZS5jb20vdGVybXMtb2YtdXNlICogQHZlcnNpb24gUmVsZWFzZTogNC41ICogQHNpbmNlIENsYXNzIGF2YWlsYWJsZSBzaW5jZSBSZWxlYXNlIDEuMCAqLyByZXF1aXJlX29uY2UoTWFnZTo6Z2V0QmFzZURpcignbGliJykgLiBEUyAuICdHb01hZ2UnIC4gRFMgLiAnTW9iaWxlRGV0ZWN0JyAuIERTIC4gJ01vYmlsZV9EZXRlY3QucGhwJyk7IGNsYXNzIEdvTWFnZV9OYXZpZ2F0aW9uX0hlbHBlcl9EYXRhIGV4dGVuZHMgTWFnZV9Db3JlX0hlbHBlcl9BYnN0cmFjdCB7IHByb3RlY3RlZCAkcHJvZHVjdF9hdHRyaWJ1dGVzID0gYXJyYXkoKTsgcHVibGljIGZ1bmN0aW9uIGdldENvbmZpZ0RhdGEoJG5vZGUpIHsgcmV0dXJuIE1hZ2U6OmdldFN0b3JlQ29uZmlnKCdnb21hZ2VfbmF2aWdhdGlvbi8nIC4gJG5vZGUpOyB9IHB1YmxpYyBmdW5jdGlvbiBnZXRBbGxTdG9yZURvbWFpbnMoKSB7ICRkb21haW5zID0gYXJyYXkoKTsgZm9yZWFjaCAoTWFnZTo6YXBwKCktPmdldFdlYnNpdGVzKCkgYXMgJHdlYnNpdGUpIHsgJHVybCA9ICR3ZWJzaXRlLT5nZXRDb25maWcoJ3dlYi91bnNlY3VyZS9iYXNlX3VybCcpOyBpZiAoJGRvbWFpbiA9IHRyaW0ocHJlZ19yZXBsYWNlKCcvXi4qP1xcL1xcLyguKik/XFwvLycsICckMScsICR1cmwpKSkgeyAkZG9tYWluc1tdID0gJGRvbWFpbjsgfSAkdXJsID0gJHdlYnNpdGUtPmdldENvbmZpZygnd2ViL3NlY3VyZS9iYXNlX3VybCcpOyBpZiAoJGRvbWFpbiA9IHRyaW0ocHJlZ19yZXBsYWNlKCcvXi4qP1xcL1xcLyguKik/XFwvLycsICckMScsICR1cmwpKSkgeyAkZG9tYWluc1tdID0gJGRvbWFpbjsgfSB9IHJldHVybiBhcnJheV91bmlxdWUoJGRvbWFpbnMpOyB9IHB1YmxpYyBmdW5jdGlvbiBnZXRBdmFpbGFiZWxXZWJzaXRlcygpIHsgcmV0dXJuICR0aGlzLT5fdygpOyB9IHB1YmxpYyBmdW5jdGlvbiBnZXRBdmFpbGF2ZWxXZWJzaXRlcygpIHsgcmV0dXJuICR0aGlzLT5fdygpOyB9IHByb3RlY3RlZCBmdW5jdGlvbiBfdygpIHsgaWYgKCFNYWdlOjpnZXRTdG9yZUNvbmZpZygnZ29tYWdlX2FjdGl2YXRpb24vYWR2YW5jZWRuYXZpZ2F0aW9uL2luc3RhbGxlZCcpIHx8IChpbnR2YWwoTWFnZTo6Z2V0U3RvcmVDb25maWcoJ2dvbWFnZV9hY3RpdmF0aW9uL2FkdmFuY2VkbmF2aWdhdGlvbi9jb3VudCcpKSA+IDEwKSApIHsgcmV0dXJuIGFycmF5KCk7IH0gJHRpbWVfdG9fdXBkYXRlID0gNjAgKiA2MCAqIDI0ICogMTU7ICRyID0gTWFnZTo6Z2V0U3RvcmVDb25maWcoJ2dvbWFnZV9hY3RpdmF0aW9uL2FkdmFuY2VkbmF2aWdhdGlvbi9hcicpOyAkdCA9IE1hZ2U6OmdldFN0b3JlQ29uZmlnKCdnb21hZ2VfYWN0aXZhdGlvbi9hZHZhbmNlZG5hdmlnYXRpb24vdGltZScpOyAkcyA9IE1hZ2U6OmdldFN0b3JlQ29uZmlnKCdnb21hZ2VfYWN0aXZhdGlvbi9hZHZhbmNlZG5hdmlnYXRpb24vd2Vic2l0ZXMnKTsgJGxhc3RfY2hlY2sgPSBzdHJfcmVwbGFjZSgkciwgJycsIE1hZ2U6OmhlbHBlcignY29yZScpLT5kZWNyeXB0KCR0KSk7ICRhbGxzaXRlcyA9IGV4cGxvZGUoJywnLCBzdHJfcmVwbGFjZSgkciwgJycsIE1hZ2U6OmhlbHBlcignY29yZScpLT5kZWNyeXB0KCRzKSkpOyAkYWxsc2l0ZXMgPSBhcnJheV9kaWZmKCRhbGxzaXRlcywgYXJyYXkoIiIpKTsgaWYgKCgkbGFzdF9jaGVjayArICR0aW1lX3RvX3VwZGF0ZSkgPCB0aW1lKCkpIHsgJHRoaXMtPmEoTWFnZTo6Z2V0U3RvcmVDb25maWcoJ2dvbWFnZV9hY3RpdmF0aW9uL2FkdmFuY2VkbmF2aWdhdGlvbi9rZXknKSwgaW50dmFsKE1hZ2U6OmdldFN0b3JlQ29uZmlnKCdnb21hZ2VfYWN0aXZhdGlvbi9hZHZhbmNlZG5hdmlnYXRpb24vY291bnQnKSksIGltcGxvZGUoJywnLCAkYWxsc2l0ZXMpICk7IH0gcmV0dXJuICRhbGxzaXRlczsgfSBwdWJsaWMgZnVuY3Rpb24gYSgkaywgJGMgPSAwLCAkcyA9ICcnKSB7ICRjaCA9IGN1cmxfaW5pdCgpOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfVVJMLCBzcHJpbnRmKCdodHRwczovL3d3dy5nb21hZ2UuY29tL2luZGV4LnBocC9nb21hZ2VfZG93bmxvYWRhYmxlL2tleS9jaGVjaycpKTsgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1BPU1QsIHRydWUpOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfUE9TVEZJRUxEUywgJ2tleT0nIC4gdXJsZW5jb2RlKCRrKSAuICcmc2t1PWFkdmFuY2VkLW5hdmlnYXRpb24mZG9tYWlucz0nIC4gdXJsZW5jb2RlKGltcGxvZGUoJywnLCAkdGhpcy0+Z2V0QWxsU3RvcmVEb21haW5zKCkpKSAuICcmdmVyPScgLiB1cmxlbmNvZGUoJzQuNScpKTsgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1RJTUVPVVQsIDMwKTsgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1JFVFVSTlRSQU5TRkVSLCB0cnVlKTsgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1NTTF9WRVJJRllQRUVSLCAwKTsgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1NTTF9WRVJJRllIT1NULCAwKTsgJGNvbnRlbnQgPSBjdXJsX2V4ZWMoJGNoKTsgJHIgPSBaZW5kX0pzb246OmRlY29kZSgkY29udGVudCk7ICRlID0gTWFnZTo6aGVscGVyKCdjb3JlJyk7IGlmIChlbXB0eSgkcikpIHsgJHZhbHVlMSA9IE1hZ2U6OmdldFN0b3JlQ29uZmlnKCdnb21hZ2VfYWN0aXZhdGlvbi9hZHZhbmNlZG5hdmlnYXRpb24vYXInKTsgJGdyb3VwcyA9IGFycmF5KCAnYWR2YW5jZWRuYXZpZ2F0aW9uJyA9PiBhcnJheSggJ2ZpZWxkcycgPT4gYXJyYXkoICdhcicgPT4gYXJyYXkoICd2YWx1ZScgPT4gJHZhbHVlMSApLCAnd2Vic2l0ZXMnID0+IGFycmF5KCAndmFsdWUnID0+IChzdHJpbmcpTWFnZTo6Z2V0U3RvcmVDb25maWcoJ2dvbWFnZV9hY3RpdmF0aW9uL2FkdmFuY2VkbmF2aWdhdGlvbi93ZWJzaXRlcycpICksICd0aW1lJyA9PiBhcnJheSggJ3ZhbHVlJyA9PiAoc3RyaW5nKSRlLT5lbmNyeXB0KCR2YWx1ZTEgLiAodGltZSgpIC0gKDYwICogNjAgKiAyNCAqIDE1IC0gMTgwMCkpIC4gJHZhbHVlMSkgKSwgJ2NvdW50JyA9PiBhcnJheSggJ3ZhbHVlJyA9PiAkYyArIDEpICkgKSApOyBNYWdlOjpnZXRNb2RlbCgnYWRtaW5odG1sL2NvbmZpZ19kYXRhJykgLT5zZXRTZWN0aW9uKCdnb21hZ2VfYWN0aXZhdGlvbicpIC0+c2V0R3JvdXBzKCRncm91cHMpIC0+c2F2ZSgpOyBNYWdlOjpnZXRDb25maWcoKS0+cmVpbml0KCk7IE1hZ2U6OmFwcCgpLT5yZWluaXRTdG9yZXMoKTsgcmV0dXJuOyB9ICR2YWx1ZTEgPSAnJzsgJHZhbHVlMiA9ICcnOyBpZiAoaXNzZXQoJHJbJ2QnXSkgJiYgaXNzZXQoJHJbJ2MnXSkpIHsgJHZhbHVlMSA9ICRlLT5lbmNyeXB0KGJhc2U2NF9lbmNvZGUoWmVuZF9Kc29uOjplbmNvZGUoJHIpKSk7IGlmICghJHMpIHsgJHMgPSBNYWdlOjpnZXRTdG9yZUNvbmZpZygnZ29tYWdlX2FjdGl2YXRpb24vYWR2YW5jZWRuYXZpZ2F0aW9uL3dlYnNpdGVzJyk7IH0gJHMgPSBhcnJheV9zbGljZShleHBsb2RlKCcsJywgJHMpLCAwLCAkclsnYyddKTsgJHZhbHVlMiA9ICRlLT5lbmNyeXB0KCR2YWx1ZTEgLiBpbXBsb2RlKCcsJywgJHMpIC4gJHZhbHVlMSk7IH0gJGdyb3VwcyA9IGFycmF5KCAnYWR2YW5jZWRuYXZpZ2F0aW9uJyA9PiBhcnJheSggJ2ZpZWxkcycgPT4gYXJyYXkoICdhcicgPT4gYXJyYXkoICd2YWx1ZScgPT4gJHZhbHVlMSApLCAnd2Vic2l0ZXMnID0+IGFycmF5KCAndmFsdWUnID0+IChzdHJpbmcpJHZhbHVlMiApLCAndGltZScgPT4gYXJyYXkoICd2YWx1ZScgPT4gKHN0cmluZykkZS0+ZW5jcnlwdCgkdmFsdWUxIC4gdGltZSgpIC4gJHZhbHVlMSkgKSwgJ2luc3RhbGxlZCcgPT4gYXJyYXkoICd2YWx1ZScgPT4gMSApLCAnY291bnQnID0+IGFycmF5KCAndmFsdWUnID0+IDApICkgKSApOyBNYWdlOjpnZXRNb2RlbCgnYWRtaW5odG1sL2NvbmZpZ19kYXRhJykgLT5zZXRTZWN0aW9uKCdnb21hZ2VfYWN0aXZhdGlvbicpIC0+c2V0R3JvdXBzKCRncm91cHMpIC0+c2F2ZSgpOyBNYWdlOjpnZXRDb25maWcoKS0+cmVpbml0KCk7IE1hZ2U6OmFwcCgpLT5yZWluaXRTdG9yZXMoKTsgfSBwdWJsaWMgZnVuY3Rpb24gZ2EoKSB7IHJldHVybiBaZW5kX0pzb246OmRlY29kZShiYXNlNjRfZGVjb2RlKE1hZ2U6OmhlbHBlcignY29yZScpLT5kZWNyeXB0KE1hZ2U6OmdldFN0b3JlQ29uZmlnKCdnb21hZ2VfYWN0aXZhdGlvbi9hZHZhbmNlZG5hdmlnYXRpb24vYXInKSkpKTsgfSBwdWJsaWMgZnVuY3Rpb24gaXNHb21hZ2VOYXZpZ2F0aW9uKCkgeyBpZiAoJHRoaXMtPmlzTW9iaWxlRGV2aWNlKCkgJiYgTWFnZTo6Z2V0U3RvcmVDb25maWdGbGFnKCdnb21hZ2VfbmF2aWdhdGlvbi9nZW5lcmFsL2Rpc2FibGVfbW9iaWxlJykpIHsgcmV0dXJuIGZhbHNlOyB9IHJldHVybiBpbl9hcnJheShNYWdlOjphcHAoKS0+Z2V0U3RvcmUoKS0+Z2V0V2Vic2l0ZUlkKCksICR0aGlzLT5nZXRBdmFpbGF2ZWxXZWJzaXRlcygpKSAmJiBNYWdlOjpnZXRTdG9yZUNvbmZpZ0ZsYWcoJ2dvbWFnZV9uYXZpZ2F0aW9uL2dlbmVyYWwvbW9kZScpOyB9IHB1YmxpYyBmdW5jdGlvbiBpc0dvbWFnZU5hdmlnYXRpb25NZW51KCkgeyByZXR1cm4gaW5fYXJyYXkoTWFnZTo6YXBwKCktPmdldFN0b3JlKCktPmdldFdlYnNpdGVJZCgpLCAkdGhpcy0+Z2V0QXZhaWxhdmVsV2Vic2l0ZXMoKSkgJiYgTWFnZTo6Z2V0U3RvcmVDb25maWdGbGFnKCdnb21hZ2VfbmF2aWdhdGlvbi9tZW51YmFyc2V0dGluZ3MvbmF2aWdhdGlvbicpOyB9IHB1YmxpYyBmdW5jdGlvbiBpc0dvbWFnZU5hdmlnYXRpb25BamF4KCkgeyByZXR1cm4gJHRoaXMtPmlzR29tYWdlTmF2aWdhdGlvbigpICYmIE1hZ2U6OmdldFN0b3JlQ29uZmlnRmxhZygnZ29tYWdlX25hdmlnYXRpb24vZ2VuZXJhbC9wYWdlcicpICYmIChNYWdlOjpyZWdpc3RyeSgnY3VycmVudF9jYXRlZ29yeScpIHx8IChNYWdlOjphcHAoKS0+Z2V0RnJvbnRDb250cm9sbGVyKCktPmdldFJlcXVlc3QoKS0+Z2V0Um91dGVOYW1lKCkgPT0gJ2NhdGFsb2dzZWFyY2gnICYmIE1hZ2U6OmFwcCgpLT5nZXRGcm9udENvbnRyb2xsZXIoKS0+Z2V0UmVxdWVzdCgpLT5nZXRDb250cm9sbGVyTmFtZSgpICE9ICdhZHZhbmNlZCcpKTsgfSBwdWJsaWMgZnVuY3Rpb24gaXNHb21hZ2VOYXZpZ2F0aW9uQ2xlYXJBamF4KCkgeyByZXR1cm4gJHRoaXMtPmlzR29tYWdlTmF2aWdhdGlvbigpICYmIChNYWdlOjpyZWdpc3RyeSgnY3VycmVudF9jYXRlZ29yeScpIHx8IChNYWdlOjphcHAoKS0+Z2V0RnJvbnRDb250cm9sbGVyKCktPmdldFJlcXVlc3QoKS0+Z2V0Um91dGVOYW1lKCkgPT0gJ2NhdGFsb2dzZWFyY2gnICYmIE1hZ2U6OmFwcCgpLT5nZXRGcm9udENvbnRyb2xsZXIoKS0+Z2V0UmVxdWVzdCgpLT5nZXRDb250cm9sbGVyTmFtZSgpICE9ICdhZHZhbmNlZCcpKTsgfSBwdWJsaWMgZnVuY3Rpb24gZm9ybWF0Q29sb3IoJHZhbHVlKSB7IGlmICgkdmFsdWUgPSBwcmVnX3JlcGxhY2UoJy9bXmEtekEtWjAtOVxzXS8nLCAnJywgJHZhbHVlKSkgeyAkdmFsdWUgPSAnIycgLiAkdmFsdWU7IH0gcmV0dXJuICR2YWx1ZTsgfSBwdWJsaWMgZnVuY3Rpb24gaXNGcmVuZGx5VXJsKCkgeyByZXR1cm4gJHRoaXMtPmlzR29tYWdlTmF2aWdhdGlvbigpICYmIE1hZ2U6OmdldFN0b3JlQ29uZmlnRmxhZygnZ29tYWdlX25hdmlnYXRpb24vZmlsdGVyX3NldHRpbmdzL2ZyZW5kbHl1cmwnKSAmJiAhJHRoaXMtPmlzR29NYWdlU2VvQm9vc3RlckVuYWJsZWQoKTsgfSBwdWJsaWMgZnVuY3Rpb24gaXNHb01hZ2VTZW9Cb29zdGVyRW5hYmxlZCgpIHsgJF9tb2R1bGVzID0gTWFnZTo6Z2V0Q29uZmlnKCktPmdldE5vZGUoJ21vZHVsZXMnKS0+Y2hpbGRyZW4oKTsgJF9tb2R1bGVzQXJyYXkgPSAoYXJyYXkpJF9tb2R1bGVzOyBpZiAoIWlzc2V0KCRfbW9kdWxlc0FycmF5WydHb01hZ2VfU2VvQm9vc3RlciddKSkgeyByZXR1cm4gZmFsc2U7IH0gcmV0dXJuICRfbW9kdWxlc0FycmF5WydHb01hZ2VfU2VvQm9vc3RlciddLT5pcygnYWN0aXZlJyk7IH0gcHVibGljIGZ1bmN0aW9uIGdldFJlcXVlc3QoKSB7ICRyZXF1ZXN0ID0gTWFnZTo6YXBwKCktPmdldEZyb250Q29udHJvbGxlcigpLT5nZXRSZXF1ZXN0KCk7IGlmICgkdGhpcy0+aXNHb01hZ2VTZW9Cb29zdGVyRW5hYmxlZCgpKSB7ICRoZWxwZXIgPSBNYWdlOjpoZWxwZXIoJ2dvbWFnZV9zZW9ib29zdGVyL2xheWVyZWQnKTsgJHJlcXVlc3QgPSAkaGVscGVyLT5nZXRTZXBhcmF0b3IoKSB8fCAkaGVscGVyLT5jYW5BZGRSZXdyaXRlUGF0aCgpID8gJGhlbHBlci0+Z2V0UmVxdWVzdCgpIDogJHJlcXVlc3Q7IH0gcmV0dXJuICRyZXF1ZXN0OyB9IHB1YmxpYyBmdW5jdGlvbiBnZXRGaWx0ZXJVcmwoJHJvdXRlID0gJyovKi8qJywgJHBhcmFtcyA9IGFycmF5KCkpIHsgaWYgKCEkdGhpcy0+aXNGcmVuZGx5VXJsKCkpIHsgJHBhcmFtc1snX3F1ZXJ5J11bJ2FqYXgnXSA9IG51bGw7IHJldHVybiBNYWdlOjpnZXRVcmwoJHJvdXRlLCAkcGFyYW1zKTsgfSAkbW9kZWwgPSBNYWdlOjpnZXRNb2RlbCgnY29yZS91cmwnKTsgJGF0dHIgPSBNYWdlOjpyZWdpc3RyeSgnZ2FuX2ZpbHRlcl9hdHRyaWJ1dGVzJyk7ICRxdWVyeV9wYXJhbXMgPSBpc19hcnJheSgkbW9kZWwtPmdldFJlcXVlc3QoKS0+Z2V0UXVlcnkoKSkgPyAkbW9kZWwtPmdldFJlcXVlc3QoKS0+Z2V0UXVlcnkoKSA6IGFycmF5KCk7ICRxdWVyeSA9IGFycmF5KCk7IGlmIChpc3NldCgkcGFyYW1zWydfcXVlcnknXSkgJiYgaXNfYXJyYXkoJHBhcmFtc1snX3F1ZXJ5J10pKSB7ICRxdWVyeV9wYXJhbXMgPSBhcnJheV9tZXJnZSgkcXVlcnlfcGFyYW1zLCAkcGFyYW1zWydfcXVlcnknXSk7IH0gZm9yZWFjaCAoJHF1ZXJ5X3BhcmFtcyBhcyAkcGFyYW0gPT4gJHZhbHVlKSB7IGlmIChpc19udWxsKCR2YWx1ZSkpIHsgJHF1ZXJ5WyRwYXJhbV0gPSBudWxsOyBjb250aW51ZTsgfSBpZiAoJHBhcmFtID09ICdjYXQnKSB7ICR2YWx1ZXMgPSBleHBsb2RlKCcsJywgJHZhbHVlKTsgJHByZXBhcmVfdmFsdWVzID0gYXJyYXkoKTsgZm9yZWFjaCAoJHZhbHVlcyBhcyAkX3ZhbHVlKSB7ICRjYXRlZ29yeSA9IE1hZ2U6OmdldE1vZGVsKCdjYXRhbG9nL2NhdGVnb3J5JyktPmxvYWQoJF92YWx1ZSk7IGlmICgkY2F0ZWdvcnkgJiYgJGNhdGVnb3J5LT5nZXRJZCgpKSB7IGlmIChNYWdlOjpnZXRTdG9yZUNvbmZpZ0ZsYWcoJ2dvbWFnZV9uYXZpZ2F0aW9uL2ZpbHRlcl9zZXR0aW5ncy9leHBlbmRfZnJlbmRseXVybCcpKSB7ICRwYXJlbnRfaWRzID0gJGNhdGVnb3J5LT5nZXRQYXJlbnRJZHMoKTsgJHBhcmVudF9jYXRlZ29yeSA9IE1hZ2U6OmdldE1vZGVsKCdjYXRhbG9nL2NhdGVnb3J5JyktPmxvYWQoZW5kKCRwYXJlbnRfaWRzKSk7ICRwcmVwYXJlX3ZhbHVlc1tdID0gJHBhcmVudF9jYXRlZ29yeS0+Z2V0RGF0YSgndXJsX2tleScpIC4gJ3wnIC4gJGNhdGVnb3J5LT5nZXREYXRhKCd1cmxfa2V5Jyk7IH0gZWxzZSB7ICRwcmVwYXJlX3ZhbHVlc1tdID0gJGNhdGVnb3J5LT5nZXREYXRhKCd1cmxfa2V5Jyk7IH0gfSB9IGlmICghZW1wdHkoJHByZXBhcmVfdmFsdWVzKSkgeyAkcXVlcnlbJHBhcmFtXSA9IGltcGxvZGUoJywnLCAkcHJlcGFyZV92YWx1ZXMpOyB9IGVsc2UgeyAkcXVlcnlbJHBhcmFtXSA9IG51bGw7IH0gfSBlbHNlaWYgKGlzc2V0KCRhdHRyWyRwYXJhbV0pICYmICFpbl9hcnJheSgkYXR0clskcGFyYW1dWyd0eXBlJ10sIGFycmF5KCdwcmljZScsICdkZWNpbWFsJykpKSB7ICR2YWx1ZXMgPSBleHBsb2RlKCcsJywgJHZhbHVlKTsgJHByZXBhcmVfdmFsdWVzID0gYXJyYXkoKTsgZm9yZWFjaCAoJHZhbHVlcyBhcyAkX3ZhbHVlKSB7IGZvcmVhY2ggKCRhdHRyWyRwYXJhbV1bJ29wdGlvbnMnXSBhcyAkX2sgPT4gJF92KSB7IGlmICgkX3YgPT0gJF92YWx1ZSkgeyAkcHJlcGFyZV92YWx1ZXNbXSA9ICRfazsgYnJlYWs7IH0gfSB9IGlmICghZW1wdHkoJHByZXBhcmVfdmFsdWVzKSkgeyAkcXVlcnlbJHBhcmFtXSA9IGltcGxvZGUoJywnLCAkcHJlcGFyZV92YWx1ZXMpOyB9IGVsc2UgeyAkcXVlcnlbJHBhcmFtXSA9IG51bGw7IH0gfSBlbHNlaWYgKGlzc2V0KCRhdHRyWyRwYXJhbV0pICYmIGluX2FycmF5KCRhdHRyWyRwYXJhbV1bJ3R5cGUnXSwgYXJyYXkoJ3ByaWNlJywgJ2RlY2ltYWwnKSkpIHsgaWYgKGlzX2FycmF5KCR2YWx1ZSkpIHsgaWYgKGlzc2V0KCR2YWx1ZVsnZnJvbSddKSkgeyAkcXVlcnlbJHBhcmFtIC4gJ19mcm9tJ10gPSAkdmFsdWVbJ2Zyb20nXTsgfSBpZiAoaXNzZXQoJHZhbHVlWyd0byddKSkgeyAkcXVlcnlbJHBhcmFtIC4gJ190byddID0gJHZhbHVlWyd0byddOyB9IH0gZWxzZWlmICgoJGF0dHJpYnV0ZSA9ICR0aGlzLT5nZXRQcm9kdWN0QXR0cmlidXRlKCRwYXJhbSkpICYmIGluX2FycmF5KCRhdHRyaWJ1dGUtPmdldFJhbmdlT3B0aW9ucygpLCBhcnJheShHb01hZ2VfTmF2aWdhdGlvbl9Nb2RlbF9BZG1pbmh0bWxfU3lzdGVtX0NvbmZpZ19Tb3VyY2VfRmlsdGVyX09wdGlvbnNyYW5nZTo6TUFOVUFMTFksIEdvTWFnZV9OYXZpZ2F0aW9uX01vZGVsX0FkbWluaHRtbF9TeXN0ZW1fQ29uZmlnX1NvdXJjZV9GaWx0ZXJfT3B0aW9uc3JhbmdlOjpBVVRPKSApICYmICRhdHRyaWJ1dGUtPmdldEZpbHRlclR5cGUoKSA9PSBHb01hZ2VfTmF2aWdhdGlvbl9Nb2RlbF9MYXllcjo6RklMVEVSX1RZUEVfREVGQVVMVCApIHsgJHZhbHVlcyA9IGV4cGxvZGUoJywnLCAkdmFsdWUpOyAkcXVlcnlbJHBhcmFtIC4gJ19mcm9tJ10gPSAkdmFsdWVzWzBdOyAkcXVlcnlbJHBhcmFtIC4gJ190byddID0gJHZhbHVlc1sxXTsgJHF1ZXJ5WyRwYXJhbV0gPSBudWxsOyB9IGVsc2UgeyAkcXVlcnlbJHBhcmFtXSA9ICR2YWx1ZTsgfSB9IGVsc2UgeyAkcXVlcnlbJHBhcmFtXSA9ICR2YWx1ZTsgfSB9ICRwYXJhbXNbJ19xdWVyeSddID0gJHF1ZXJ5OyAkcGFyYW1zWydfcXVlcnknXVsnYWpheCddID0gbnVsbDsgcmV0dXJuICRtb2RlbC0+Z2V0VXJsKCRyb3V0ZSwgJHBhcmFtcyk7IH0gcHVibGljIGZ1bmN0aW9uIGZvcm1hdFVybFZhbHVlKCR2YWx1ZSwgJGRlZmF1bHQpIHsgJG9sZExvY2FsZSA9IHNldGxvY2FsZShMQ19DT0xMQVRFLCAiMCIpOyAkbG9jYWxlQ29kZSA9IE1hZ2U6OmFwcCgpLT5nZXRMb2NhbGUoKS0+Z2V0TG9jYWxlQ29kZSgpOyBzZXRsb2NhbGUoTENfQ09MTEFURSwgJGxvY2FsZUNvZGUgLiAnLlVURjgnLCAnQy5VVEYtOCcsICdlbl9VUy51dGY4Jyk7ICR2YWx1ZSA9IGljb252KG1iX2RldGVjdF9lbmNvZGluZygkdmFsdWUpLCAnQVNDSUkvL1RSQU5TTElUJywgJHZhbHVlKTsgc2V0bG9jYWxlKExDX0NPTExBVEUsICRvbGRMb2NhbGUpOyAkdmFsdWUgPSBzdHJ0b2xvd2VyKCR2YWx1ZSk7ICR2YWx1ZSA9IHByZWdfcmVwbGFjZSgnI1teMC05YS16XSsjaScsICctJywgTWFnZTo6aGVscGVyKCdjYXRhbG9nL3Byb2R1Y3RfdXJsJyktPmZvcm1hdCgkdmFsdWUpKTsgJHZhbHVlID0gdHJpbSgkdmFsdWUsICctJyk7IHJldHVybiAkdmFsdWUgPyAkdmFsdWUgOiAkZGVmYXVsdDsgfSBwdWJsaWMgZnVuY3Rpb24gaXNNb2JpbGVEZXZpY2UoKSB7ICRkZXRlY3QgPSBuZXcgTW9iaWxlX0RldGVjdCgpOyByZXR1cm4gJGRldGVjdC0+aXNNb2JpbGUoKTsgfSBwdWJsaWMgZnVuY3Rpb24gaXNHb29nbGVib3QoKSB7IGlmIChwcmVnX21hdGNoKCIvR29vZ2xlLyIsIE1hZ2U6OmhlbHBlcignY29yZS9odHRwJyktPmdldEh0dHBVc2VyQWdlbnQoKSkgfHwgcHJlZ19tYXRjaCgiL2JvdC8iLCBNYWdlOjpoZWxwZXIoJ2NvcmUvaHR0cCcpLT5nZXRIdHRwVXNlckFnZW50KCkpKSB7ICRpcCA9IE1hZ2U6OmhlbHBlcignY29yZS9odHRwJyktPmdldFJlbW90ZUFkZHIoKTsgJG5hbWUgPSBnZXRob3N0YnlhZGRyKCRpcCk7IGlmIChwcmVnX21hdGNoKCIvR29vZ2xlYm90LyIsICRuYW1lKSB8fCBwcmVnX21hdGNoKCIvYm90LyIsICRuYW1lKSkgeyAkaG9zdHMgPSBnZXRob3N0YnluYW1lbCgkbmFtZSk7IGZvcmVhY2ggKCRob3N0cyBhcyAkaG9zdCkgeyBpZiAoJGhvc3QgPT0gJGlwKSB7IHJldHVybiB0cnVlOyB9IH0gfSB9IGVsc2UgeyByZXR1cm4gdHJ1ZTsgfSByZXR1cm4gZmFsc2U7IH0gcHVibGljIGZ1bmN0aW9uIGdldEZpbHRlckl0ZW1Db3VudCgkZmlsdGVyKSB7ICRjb3VudCA9IDA7IGlmICgkZmlsdGVyICYmICRmaWx0ZXItPmdldEl0ZW1zKCkpIHsgZm9yZWFjaCAoJGZpbHRlci0+Z2V0SXRlbXMoKSBhcyAkaXRlbSkgeyAkY291bnQgKz0gJGl0ZW0tPmdldENvdW50KCk7IH0gfSBpZiAoJGNvdW50ID09IDAgJiYgJGZpbHRlci0+Z2V0RmlsdGVyKCktPmdldFJlcXVlc3RWYXJWYWx1ZSgpID09ICdzdG9ja19zdGF0dXMnKSB7IHJldHVybiAxOyB9IHJldHVybiAkY291bnQ7IH0gcHVibGljIGZ1bmN0aW9uIGdldEZpbHRlcigpIHsgJGZpbHRlciA9IE1hZ2U6OmdldFN0b3JlQ29uZmlnKCdnb21hZ2VfbmF2aWdhdGlvbi9maWx0ZXIvZmlsdGVyX2J0bl90eHQnKTsgaWYgKCRmaWx0ZXIgPT0gJycpIHsgJGZpbHRlciA9ICR0aGlzLT5fXygnRmlsdGVyJyk7IH0gcmV0dXJuICRmaWx0ZXI7IH0gcHVibGljIGZ1bmN0aW9uIGdldENsZWFyQWxsKCkgeyAkY2xlYXIgPSBNYWdlOjpnZXRTdG9yZUNvbmZpZygnZ29tYWdlX25hdmlnYXRpb24vZmlsdGVyL2NsZWFyX2J0bl90eHQnKTsgaWYgKCRjbGVhciA9PSAnJykgeyAkY2xlYXIgPSAkdGhpcy0+X18oJ0NsZWFyIEFsbCcpOyB9IHJldHVybiAkY2xlYXI7IH0gcHVibGljIGZ1bmN0aW9uIGdldE1vcmUoKSB7ICRtb3JlID0gTWFnZTo6Z2V0U3RvcmVDb25maWcoJ2dvbWFnZV9uYXZpZ2F0aW9uL2ZpbHRlci9tb3JlX2J0bl90eHQnKTsgaWYgKCRtb3JlID09ICcnKSB7ICRtb3JlID0gJHRoaXMtPl9fKCdNb3JlJyk7IH0gcmV0dXJuICRtb3JlOyB9IHB1YmxpYyBmdW5jdGlvbiBnZXRMZXNzKCkgeyAkbGVzcyA9IE1hZ2U6OmdldFN0b3JlQ29uZmlnKCdnb21hZ2VfbmF2aWdhdGlvbi9maWx0ZXIvbGVzc19idG5fdHh0Jyk7IGlmICgkbGVzcyA9PSAnJykgeyAkbGVzcyA9ICR0aGlzLT5fXygnTGVzcycpOyB9IHJldHVybiAkbGVzczsgfSBwdWJsaWMgZnVuY3Rpb24gZ2V0U2hvd21vcmUoKSB7ICRzaG93bW9yZSA9IE1hZ2U6OmdldFN0b3JlQ29uZmlnKCdnb21hZ2VfbmF2aWdhdGlvbi9maWx0ZXIvc2hvd21vcmVfYnRuX3R4dCcpOyBpZiAoJHNob3dtb3JlID09ICcnKSB7ICRzaG93bW9yZSA9ICR0aGlzLT5fXygnU2hvdyBtb3JlIHByb2R1Y3RzJyk7IH0gcmV0dXJuICRzaG93bW9yZTsgfSBwdWJsaWMgZnVuY3Rpb24gZ2V0QmFja3RvdG9wKCkgeyAkYmFja3RvdG9wID0gTWFnZTo6Z2V0U3RvcmVDb25maWcoJ2dvbWFnZV9uYXZpZ2F0aW9uL2ZpbHRlci9iYWNrdG90b3BfYnRuX3R4dCcpOyBpZiAoJGJhY2t0b3RvcCA9PSAnJykgeyAkYmFja3RvdG9wID0gJHRoaXMtPl9fKCdCYWNrIHRvIFRvcCcpOyB9IHJldHVybiAkYmFja3RvdG9wOyB9IHB1YmxpYyBmdW5jdGlvbiBpc0VudGVycHJpc2UoKSB7IGlmIChNYWdlOjpnZXRDb25maWcoKS0+Z2V0TW9kdWxlQ29uZmlnKCdFbnRlcnByaXNlX0VudGVycHJpc2UnKSAmJiBNYWdlOjpnZXRDb25maWcoKS0+Z2V0TW9kdWxlQ29uZmlnKCdFbnRlcnByaXNlX0FkbWluR3dzJykgJiYgTWFnZTo6Z2V0Q29uZmlnKCktPmdldE1vZHVsZUNvbmZpZygnRW50ZXJwcmlzZV9DaGVja291dCcpICYmIE1hZ2U6OmdldENvbmZpZygpLT5nZXRNb2R1bGVDb25maWcoJ0VudGVycHJpc2VfQ3VzdG9tZXInKSkgeyByZXR1cm4gdHJ1ZTsgfSByZXR1cm4gZmFsc2U7IH0gcHVibGljIGZ1bmN0aW9uIGdldFNpZGUoJHR5cGUpIHsgc3dpdGNoICgkdHlwZSkgeyBjYXNlIEdvTWFnZV9OYXZpZ2F0aW9uX01vZGVsX0FkbWluaHRtbF9TeXN0ZW1fQ29uZmlnX1NvdXJjZV9GaWx0ZXJfQXR0cmlidXRlbG9jYXRpb246OkxFRlRfQkxPQ0s6IHJldHVybiAnbGVmdCc7IGJyZWFrOyBjYXNlIEdvTWFnZV9OYXZpZ2F0aW9uX01vZGVsX0FkbWluaHRtbF9TeXN0ZW1fQ29uZmlnX1NvdXJjZV9GaWx0ZXJfQXR0cmlidXRlbG9jYXRpb246OkNPTlRFTlQ6IHJldHVybiAnY29udGVudCc7IGJyZWFrOyBjYXNlIEdvTWFnZV9OYXZpZ2F0aW9uX01vZGVsX0FkbWluaHRtbF9TeXN0ZW1fQ29uZmlnX1NvdXJjZV9GaWx0ZXJfQXR0cmlidXRlbG9jYXRpb246OlJJR0hUX0JMT0NLOiByZXR1cm4gJ3JpZ2h0JzsgYnJlYWs7IGRlZmF1bHQ6IHJldHVybiAnbGVmdCc7IGJyZWFrOyB9IH0gcHVibGljIGZ1bmN0aW9uIGdldENsZWFyTGlua1VybCgkX2ZpbHRlcikgeyBpZiAoJF9maWx0ZXItPmdldEZpbHRlcigpLT5nZXRSZXF1ZXN0VmFyKCkgIT0gJ2NhdCcgJiYgJF9maWx0ZXItPmdldEZpbHRlcigpLT5nZXRSZXF1ZXN0VmFyKCkgIT0gJ3N0b2NrX3N0YXR1cycpIHsgaWYgKCRfZmlsdGVyLT5nZXRGaWx0ZXIoKS0+Z2V0QXR0cmlidXRlTW9kZWwoKS0+Z2V0RnJvbnRlbmRJbnB1dCgpKSB7ICRhdHRyaWJ1dGUgPSAkX2ZpbHRlci0+Z2V0RmlsdGVyKCktPmdldEF0dHJpYnV0ZU1vZGVsKCk7IGlmICgoaW5fYXJyYXkoJGF0dHJpYnV0ZS0+Z2V0RmlsdGVyVHlwZSgpLCBhcnJheShHb01hZ2VfTmF2aWdhdGlvbl9Nb2RlbF9MYXllcjo6RklMVEVSX1RZUEVfU0xJREVSLCBHb01hZ2VfTmF2aWdhdGlvbl9Nb2RlbF9MYXllcjo6RklMVEVSX1RZUEVfU0xJREVSX0lOUFVULCBHb01hZ2VfTmF2aWdhdGlvbl9Nb2RlbF9MYXllcjo6RklMVEVSX1RZUEVfSU5QVVRfU0xJREVSKSApICYmICFNYWdlOjpoZWxwZXIoJ2dvbWFnZV9uYXZpZ2F0aW9uJyktPmlzTW9iaWxlRGV2aWNlKCkpIHx8ICgkYXR0cmlidXRlLT5nZXRGaWx0ZXJUeXBlKCkgPT0gR29NYWdlX05hdmlnYXRpb25fTW9kZWxfTGF5ZXI6OkZJTFRFUl9UWVBFX0RFRkFVTFQgJiYgJGF0dHJpYnV0ZS0+Z2V0UmFuZ2VPcHRpb25zKCkgIT0gR29NYWdlX05hdmlnYXRpb25fTW9kZWxfQWRtaW5odG1sX1N5c3RlbV9Db25maWdfU291cmNlX0ZpbHRlcl9PcHRpb25zcmFuZ2U6Ok5PKSApIHsgJHBhcmFtcyA9IGFycmF5KCk7ICRwYXJhbXNbJ19ub3NpZCddID0gdHJ1ZTsgJHBhcmFtc1snX2N1cnJlbnQnXSA9IHRydWU7ICRwYXJhbXNbJ191c2VfcmV3cml0ZSddID0gdHJ1ZTsgJHBhcmFtc1snX2VzY2FwZSddID0gZmFsc2U7ICR1cmwgPSAkdGhpcy0+Z2V0RmlsdGVyVXJsKCcqLyovKicsICRwYXJhbXMpOyAkY2xlYW5fdXJsID0gJHRoaXMtPmdldEZpbHRlclVybCgnKi8qLyonLCBhcnJheSgnX2N1cnJlbnQnID0+IHRydWUsICdfbm9zaWQnID0+IHRydWUsICdfdXNlX3Jld3JpdGUnID0+IHRydWUsICdfcXVlcnknID0+IGFycmF5KCksICdfZXNjYXBlJyA9PiBmYWxzZSkpOyBpZiAoc3RycG9zKCRjbGVhbl91cmwsICI/IikgIT09IGZhbHNlKSB7ICRjbGVhbl91cmwgPSBzdWJzdHIoJGNsZWFuX3VybCwgMCwgc3RycG9zKCRjbGVhbl91cmwsICc/JykpOyB9ICRwYXJhbXMgPSBzdHJfcmVwbGFjZSgkY2xlYW5fdXJsLCAiIiwgJHVybCk7ICRwYXJhbXMgPSBzdHJfcmVwbGFjZSgiPyIsICIiLCAkcGFyYW1zKTsgJHBhckFycmF5ID0gZXhwbG9kZSgiJiIsICRwYXJhbXMpOyAkbmV3UGFyQXJyYXkgPSBhcnJheSgpOyBmb3JlYWNoICgkcGFyQXJyYXkgYXMgJHBhcikgeyAkZXhwYXIgPSBleHBsb2RlKCI9IiwgJHBhcik7IGlmICgkZXhwYXJbMF0gIT0gJGF0dHJpYnV0ZS0+Z2V0QXR0cmlidXRlQ29kZSgpIC4gJ19mcm9tJyAmJiAkZXhwYXJbMF0gIT0gJGF0dHJpYnV0ZS0+Z2V0QXR0cmlidXRlQ29kZSgpIC4gJ190bycgKSB7ICRuZXdQYXJBcnJheVtdID0gJHBhcjsgfSB9IGlmICgkbmV3UGFyQXJyYXkpIHsgaWYgKCRfZmlsdGVyLT5nZXRBamF4RW5hYmxlZCgpKSB7IHJldHVybiAkY2xlYW5fdXJsIC4gJz8nIC4gaW1wbG9kZSgiJiIsICRuZXdQYXJBcnJheSkgLiAnJmFqYXg9MSc7IH0gZWxzZSB7IHJldHVybiAkY2xlYW5fdXJsIC4gJz8nIC4gaW1wbG9kZSgiJiIsICRuZXdQYXJBcnJheSk7IH0gfSBlbHNlIHsgaWYgKCRfZmlsdGVyLT5nZXRBamF4RW5hYmxlZCgpKSB7IHJldHVybiAkY2xlYW5fdXJsIC4gJz9hamF4PTEnOyB9IGVsc2UgeyByZXR1cm4gJGNsZWFuX3VybDsgfSB9IH0gfSBlbHNlIHsgcmV0dXJuICRfZmlsdGVyLT5nZXRDbGVhckxpbmtVcmwoKTsgfSB9IGVsc2UgeyByZXR1cm4gJF9maWx0ZXItPmdldENsZWFyTGlua1VybCgpOyB9IH0gcHVibGljIGZ1bmN0aW9uIG5vdGlmeSgpIHsgJGZyZXF1ZW5jeSA9IGludHZhbChNYWdlOjphcHAoKS0+bG9hZENhY2hlKCdnb21hZ2Vfbm90aWZpY2F0aW9uc19mcmVxdWVuY3knKSk7IGlmICghJGZyZXF1ZW5jeSkgeyAkZnJlcXVlbmN5ID0gMjQ7IH0gJGxhc3RfdXBkYXRlID0gaW50dmFsKE1hZ2U6OmFwcCgpLT5sb2FkQ2FjaGUoJ2dvbWFnZV9ub3RpZmljYXRpb25zX2xhc3RfdXBkYXRlJykpOyBpZiAoKCRmcmVxdWVuY3kgKiA2MCAqIDYwICsgJGxhc3RfdXBkYXRlKSA+IHRpbWUoKSkgeyByZXR1cm4gZmFsc2U7IH0gJHRpbWVzdGFtcCA9ICRsYXN0X3VwZGF0ZTsgaWYgKCEkdGltZXN0YW1wKSB7ICR0aW1lc3RhbXAgPSB0aW1lKCk7IH0gdHJ5IHsgJGNoID0gY3VybF9pbml0KCk7IGN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9VUkwsIHNwcmludGYoJ2h0dHBzOi8vd3d3LmdvbWFnZS5jb20vaW5kZXgucGhwL2dvbWFnZV9ub3RpZmljYXRpb24vaW5kZXgvZGF0YScpKTsgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1BPU1QsIHRydWUpOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfUE9TVEZJRUxEUywgJ3NrdT1hZHZhbmNlZC1uYXZpZ2F0aW9uJnRpbWVzdGFtcD0nIC4gJHRpbWVzdGFtcCAuICcmdmVyPScgLiB1cmxlbmNvZGUoJzQuNScpKTsgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1RJTUVPVVQsIDMwKTsgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1JFVFVSTlRSQU5TRkVSLCB0cnVlKTsgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1NTTF9WRVJJRllQRUVSLCAwKTsgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1NTTF9WRVJJRllIT1NULCAwKTsgJGNvbnRlbnQgPSBjdXJsX2V4ZWMoJGNoKTsgJHJlc3VsdCA9IFplbmRfSnNvbjo6ZGVjb2RlKCRjb250ZW50KTsgaWYgKCRyZXN1bHQgJiYgaXNzZXQoJHJlc3VsdFsnZnJlcXVlbmN5J10pICYmICgkcmVzdWx0WydmcmVxdWVuY3knXSAhPSAkZnJlcXVlbmN5KSkgeyBNYWdlOjphcHAoKS0+c2F2ZUNhY2hlKCRyZXN1bHRbJ2ZyZXF1ZW5jeSddLCAnZ29tYWdlX25vdGlmaWNhdGlvbnNfZnJlcXVlbmN5Jyk7IH0gaWYgKCRyZXN1bHQgJiYgaXNzZXQoJHJlc3VsdFsnZGF0YSddKSkgeyBpZiAoIWVtcHR5KCRyZXN1bHRbJ2RhdGEnXSkpIHsgTWFnZTo6Z2V0TW9kZWwoJ2FkbWlubm90aWZpY2F0aW9uL2luYm94JyktPnBhcnNlKCRyZXN1bHRbJ2RhdGEnXSk7IH0gfSB9IGNhdGNoIChFeGNlcHRpb24gJGUpIHsgfSBNYWdlOjphcHAoKS0+c2F2ZUNhY2hlKHRpbWUoKSwgJ2dvbWFnZV9ub3RpZmljYXRpb25zX2xhc3RfdXBkYXRlJyk7IH0gcHVibGljIGZ1bmN0aW9uIGdldElzQW55bW9yZVZlcnNpb24oJG1ham9yLCAkbWlub3IsICRyZXZpc2lvbiA9IDApIHsgJHZlcnNpb25faW5mbyA9IE1hZ2U6OmdldFZlcnNpb24oKTsgJHZlcnNpb25faW5mbyA9IGV4cGxvZGUoJy4nLCAkdmVyc2lvbl9pbmZvKTsgaWYgKCR2ZXJzaW9uX2luZm9bMF0gPiAkbWFqb3IpIHsgcmV0dXJuIHRydWU7IH0gZWxzZWlmICgkdmVyc2lvbl9pbmZvWzBdID09ICRtYWpvcikgeyBpZiAoJHZlcnNpb25faW5mb1sxXSA+ICRtaW5vcikgeyByZXR1cm4gdHJ1ZTsgfSBlbHNlaWYgKCR2ZXJzaW9uX2luZm9bMV0gPT0gJG1pbm9yKSB7IGlmICgkdmVyc2lvbl9pbmZvWzJdID49ICRyZXZpc2lvbikgeyByZXR1cm4gdHJ1ZTsgfSBlbHNlIHsgcmV0dXJuIGZhbHNlOyB9IH0gZWxzZSB7IHJldHVybiBmYWxzZTsgfSB9IGVsc2UgeyByZXR1cm4gZmFsc2U7IH0gfSBwdWJsaWMgZnVuY3Rpb24gZ2V0UHJvZHVjdEF0dHJpYnV0ZSgkY29kZSkgeyBpZiAoIWlzc2V0KCR0aGlzLT5wcm9kdWN0X2F0dHJpYnV0ZXNbJGNvZGVdKSkgeyAkYXR0cmlidXRlTW9kZWwgPSBNYWdlOjpnZXRNb2RlbCgnZWF2L2VudGl0eV9hdHRyaWJ1dGUnKS0+bG9hZEJ5Q29kZSgnY2F0YWxvZ19wcm9kdWN0JywgJGNvZGUpOyAkYXR0cmlidXRlID0gTWFnZTo6Z2V0TW9kZWwoJ2NhdGFsb2cvcmVzb3VyY2VfZWF2X2F0dHJpYnV0ZScpLT5sb2FkKCRhdHRyaWJ1dGVNb2RlbC0+Z2V0SWQoKSk7ICR0aGlzLT5wcm9kdWN0X2F0dHJpYnV0ZXNbJGNvZGVdID0gJGF0dHJpYnV0ZTsgfSByZXR1cm4gJHRoaXMtPnByb2R1Y3RfYXR0cmlidXRlc1skY29kZV07IH0gfQ=="));